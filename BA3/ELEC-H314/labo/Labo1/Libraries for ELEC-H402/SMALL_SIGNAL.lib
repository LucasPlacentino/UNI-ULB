*****************************************************************
* INFINEON Power Transistors                                    *
* Level-1 / 3 PSPICE Library for small signal transistors       *
* Version 080208                                                *
*                                                               *
*****************************************************************
* simulation support:  simulate@infineon.com                    *
*                                                               *
* internet          :  www.infineon.com/simulate                * 
*****************************************************************
*                                                               *
* Models provided by Infineon are not warranted by Infineon as  *
* fully representing all the specifications and operating       *
* characteristics of the semiconductor product to which the     *
* model relates. The models describe the characteristics of     *
* typical devices.                                              *
* In all cases, the current data sheet information for a given  *
* device is the final design guideline and the only actual      *
* performance specification.                                    *
* Although models can be a useful tool in evaluating device     *
* performance, they cannot model exact device performance under *
* all conditions, nor are they intended to replace bread-       *
* boarding for final verification. INFINEON therefore does not  *
* assume any liability arising from their use.                  *
* INFINEON reserves the right to change models without prior    *
* notice.                                                       *
*                                                               *
*****************************************************************
*                                                               *
* This library contains models of the following INFINEON        *
* transistors:  version 10/97                                   *
* 1. simple models (parts may be not available any more)        * 
*                                                               *
*   BS-170       BSP-319       BSS-92_1                         *
*   BSP-125      BSP-88        BSS-145      BSS-92              *
*   BSP-149      BSP-89        BSS-229      BSS-98              *
*   BSP-171      BSS-100       BSS-295                          *
*   BSP-295      BSS-101       BSS-296                          *
*   BSP-299      BSS-110       BSS-297                          *
*   BSP-315      BSS-119       BSS-84                           *
*   BSP-316      BSS-125       BSS-87                           *
*   BSP-317      BSS-129       BSS-88                           *
*   BSP-318      BSS-135       BSS-89                           *
*                                                               *
*---------------------------------------------------------------*
* connections:    gate                                          *
*                 | source                                      *
*                 | | drain                                     *
*                 | | |                                         *
*.subckt BS-170   1 2 3                                         *
*---------------------------------------------------------------*
*                                                               *
* 2. new models (Level 1 + Level 3)                             *
*        (with optional parameters)     version 07/03           *
*   updated 06/03 new 60 V process                              *                    
*   BSS138N        (n-channel,  60 V enhancement)               *
*   SISC0_3N06E1.0 (n-channel, 60 V enhancement)                *
*   BSS138W        (n-channel,  60 V enhancement)               *
*   SN7002N        (n-channel,  60 V enhancement)               *
*   SISC0_3N06E1.4 (n-channel, 60 V enhancement)                *
*   SN7002W        (n-channel,  60 V enhancement)               *
*   BSS7728N       (n-channel,  60 V enhancement)               *
*   BSS159N        (n-channel,  60 V depletion)                 *
*   SISC0_3N06D    (n-channel,  60 V depletion)                 *
*   BSP296         (n-channel, 100 V enhancement)               *
*   BSS123         (n-channel, 100 V enhancement)               *
*   BSP123         (n-channel, 100 V enhancement)               *
*   BSS119         (n-channel, 100 V enhancement)               *
*   BSS169         (n-channel, 100 V depletion)                 *
*   SISC0_5N10D    (n-channel, 100 V depletion)                 *
*   BSP297         (n-channel, 200 V enhancement)               *
*   SISC3_2N20E    (n-channel, 200 V enhancement)               *
*   BSP149         (n-channel, 200 V depletion)                 *
*   SISC3_2N20D    (n-channel, 200 V depletion)                 *
*   BSS131         (n-channel, 240 V enhancement)               *
*   BSS87          (n-channel, 240 V enhancement)               *
*   BSP89          (n-channel, 240 V enhancement)               *
*   BSP88          (n-channel, 240 V enhancement)               *
*   BSP129         (n-channel, 240 V depletion)                 *
*   SISC0_97N24D   (n-channel, 240 V depletion)                 *
*   BSS139         (n-channel, 250 V depletion)                 *
*   BSP324         (n-channel, 400 V enhancement)               *
*   BSP125         (n-channel, 600 V enhancement)               *
*   BSP135         (n-channel, 600 V depletion)                 *
*   SISC1_4N60D    (n-channel, 600 V depletion)                 *
*   BSS126         (n-channel, 600 V depletion)                 *
*                                                               *
*   BSP92P    (p-channel, 250 V enhancement)                    * 
*   BSP316P   (p-channel, 100 V enhancement)                    *
*   BSR316P   (p-channel, 100 V enhancement)                    *
*   BSP317P   (p-channel, 250 V enhancement)                    *
*   BSS192P   (p-channel, 250 V enhancement)                    *
*   SPP15P10P (p-channel, 100 V enhancement)                    *
*                                                               *
*  30V SFET products (Level 1 + Level 3)                        *
*       (without optional parameters)                           *
*                                                               *
*   BSO302SN                                                    *
*   BSO304SN                                                    *
*   BSO305N                                                     *
*   BSO307N                                                     *
*   BSO615N                                                     *
*   BSO615NV                                                    *
*   BSP308                                                      *
*   BSP318S                                                     *
*   BSP320S                                                     *
*                                                               *
*  30V/60V complementary n/p-channel products (Level 1+ Level 3)*
*       (without optional parameters)                           * 
*                                                               *
*   BSO315C                                                     *
*   BSO615C                                                     *
*   BSO612CV                                                    *
*****************************************************************
* thermal nodes of level 3 models:                              *
*                                                               *
*  .SUBCKT BSP135 drain gate source Tj Tcase                    *
*  Tj :    potential=temperature (in °C) at junction (typically *
*          not connected)                                       *
*  Tcase/Tsolder_joint :                                        *
*          node where the boundary contition - external heat    *
*          sinks etc - have to be connected (ideal heat sink    *
*          can be modeled by using a voltage source stating the *
*          ambient temperature in °C between Tcase and ground.  *
*                                                               *
* complementary devices:                                        * 
* .SUBCKT BSO612CV drain1 gate1 source1 drain1a drain2 gate2    *
*  source2 drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2        *
*                                                               *    
*****************************************************************
   
 
*n-MOSFET*60V 300mA 5 Ohm*Add_in_Line
.SUBCKT BS-170 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 1117M
D170 76 95 DREV
.MODEL DREV D CJO=0.025N RS=50M TT=30N IS=300P BV=60
M170 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.235 KP=0.158
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.09N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.287N M=0.539 VJ=0.985
CGS 76 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.7 KP=0.135
LG 4 1 7N
.ENDS
*******
*n-MOSFET*600V 120mA 45 Ohm*Add_in_Line
.SUBCKT BSP-125 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 593M
D125 76 95 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=80N IS=300P BV=600
M125 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.972 KP=0.185
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=1
M3 86 11 8 8 MSW
COX 11 8 0.012N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.012N M=0.409 VJ=0.981
CGS 76 11 0.085N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-18.35 KP=0.00175
LG 4 1 7N
.ENDS
*******
*Depl-MOS*200V 480mA 3.5 Ohm*Add_in_Line
.SUBCKT BSP-149 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 5.5M
RS 5 76 578M
D149 76 97 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=35N IS=300P BV=200
M149 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-1.334 KP=1.022
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 98 87 8 8 MSW
COX 87 8 0.08N
DGD 8 98 DCGD
.MODEL DCGD D CJO=59P M=0.542 VJ=0.979
CGS 76 99 225P
VGC 87 99 3
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-16.18 KP=0.34
LG 95 1 7N
.ENDS
*******
*p-MOSFET*60V 1700mA 0.35 Ohm*Add_in_Line
.SUBCKT BSP-171 1 2 3
LS 5 2 7N
LD 102 3 5N
RG 4 95 33.1
RS 5 76 92M
D171 102 76 DREV
.MODEL DREV D CJO=1N RS=20M TT=100N IS=300P BV=60
M171 117 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.582 KP=0.858
M2 11 117 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.3
M3 117 11 8 8 MSW
COX 11 8 0.5N
DGD 117 8 DCGD
.MODEL DCGD D CJO=758P M=0.635 VJ=1.015
CGS 76 95 0.6N
V8 11 95 -14
RH 117 102 10M
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 1800mA 0.3 Ohm*Add_in_Line
.SUBCKT BSP-295 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 130M
D295 76 95 DREV
.MODEL DREV D CJO=0.2N RS=50M TT=30N IS=300P BV=50
M295 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.38 KP=1.27
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.8N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.287N M=0.539 VJ=0.985
CGS 76 11 0.26N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.51 KP=1.7
LG 4 1 7N
.ENDS
*******
*n-MOSFET*500V 400mA 4 Ohm*Add_in_Line
.SUBCKT BSP-299 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 8.9
RS 5 76 0.383
D299 76 97 DREV
.MODEL DREV D CJO=0.13N RS=20M TT=150N IS=300P BV=500
M299 99 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.946 KP=0.973
M2 96 99 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 99 96 8 8 MSW
COX 96 8 0.6N
DGD 8 99 DCGD
.MODEL DCGD D CJO=0.098N M=0.57 VJ=1.032
CGS 76 96 0.32N
MRDR 99 99 97 99 MVRD
.MODEL MVRD NMOS VTO=-27.83 KP=0.0138
LG 95 1 7N
.ENDS
*******
*p-MOSFET*50V 1100mA 0.8 Ohm*Add_in_Line
.SUBCKT BSP-315 1 2 3
LS 5 2 7N
LD 102 3 5N
RG 4 95 5.5M
RS 5 76 252M
D315 102 76 DREV
.MODEL DREV D CJO=300P RS=20M TT=100N IS=300P BV=50
M315 102 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.246 KP=0.37
M2 11 102 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 102 11 8 8 MSW
COX 11 8 180P
DGD 102 8 DCGD
.MODEL DCGD D CJO=527P M=0.605 VJ=0.913
CGS 76 95 215P
VGC 11 95 -20
* BESCHREIBT EINE IMPLANTIERTE LADUNG (VERSCHIEBT DIE EINSATZSPANNUNG)
LG 4 1 7N
.ENDS
*******
*p-MOSFET*100V 650mA 2.2 Ohm*Add_in_Line
.SUBCKT BSP-316 1 2 3
LS 5 2 7N
LD 117 3 5N
RG 4 95 18.4
RS 5 76 485M
D316 117 76 DREV
.MODEL DREV D CJO=250P RS=20M TT=100N IS=300P BV=100
M316 116 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.415 KP=0.413
M2 11 116 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.5
M3 116 11 8 8 MSW
COX 11 8 0.15N
DGD 116 8 DCGD
.MODEL DCGD D CJO=405P M=0.725 VJ=1.021
CGS 76 95 0.31N
R15 116 117 280M
V8 11 95 -12
LG 4 1 7N
.ENDS
*******
*p-MOSFET*200V 370mA 6 Ohm*Add_in_Line
.SUBCKT BSP-317 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 95 5.5M
RS 5 76 322M
D317 86 76 DREV
.MODEL DREV D CJO=100P RS=20M TT=60N IS=300P BV=200
M317 102 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.419 KP=0.321
M2 11 102 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.5
M3 102 11 8 8 MSW
COX 11 8 340P
DGD 102 8 DCGD
.MODEL DCGD D CJO=98P M=0.477 VJ=0.971
CGS 76 95 225P
VGC 11 95 -13
* BESCHREIBT EINE IMPLANTIERTE LADUNG (VERSCHIEBT DIE EINSATZSPANNUNG)
MHELP 86 102 102 102 MVRD
.MODEL MVRD PMOS VTO=57.7 KP=7M
LG 4 1 7N
.ENDS
*******
*n-MOSFET*60V 2600mA 0.15 Ohm*Add_in_Line
.SUBCKT BSP-318 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 8.2
RS 5 76 0.066
D318 76 97 DREV
.MODEL DREV D CJO=0.55N RS=20M TT=150N IS=300P BV=60
M318 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.286 KP=14.9
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.6N
DGD 8 98 DCGD
.MODEL DCGD D CJO=343P M=0.505 VJ=1.032
CGS 76 99 0.55N
VGC 87 99 2
RD 98 97 0.045
LG 95 1 7N
.ENDS
*******
*n-MOSFET*50V 3800mA 0.07 Ohm*Add_in_Line
.SUBCKT BSP-319 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 15.5
RS 5 76 0.051
D318 76 97 DREV
.MODEL DREV D CJO=0.65N RS=20M TT=150N IS=300P BV=50
M319 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.851 KP=31.25
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.55N
DGD 8 98 DCGD
.MODEL DCGD D CJO=435P M=0.433 VJ=1.004
CGS 76 99 0.8N
VGC 87 99 4
RD 98 97 0.005
LG 95 1 7N
.ENDS
*******
*n-MOSFET*240V 320mA 8 Ohm*Add_in_Line
.SUBCKT BSP-88 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 183M
D88 76 95 DREV
.MODEL DREV D CJO=0.05N RS=20M TT=20N IS=300P BV=240
M88 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=0.849 KP=0.149
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.025N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.025N M=0.454 VJ=0.974
CGS 76 11 0.08N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-8.953 KP=0.0305
LG 4 1 7N
.ENDS
*******
*n-MOSFET*240V 360mA 6 Ohm*Add_in_Line
.SUBCKT BSP-89 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 249M
DSP89 76 95 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=30N IS=300P BV=240
MSP89 86 11 76 98 MBUZ
.MODEL MBUZ NMOS VTO=1.487 KP=0.225
M2 96 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 96 8 8 MSW
COX 96 8 0.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.04N M=0.495 VJ=0.98
CGS 76 11 0.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-11.76 KP=0.039
VGC 96 11 -3
LG 4 1 7N
.ENDS
*******
*n-MOSFET*100V 220mA 6 Ohm*Add_in_Line
.SUBCKT BSS-100 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 1 76 5.5M
RS 5 100 796M
D100 100 95 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=50N IS=300P BV=100
M100 86 11 100 100 MBUZ
.MODEL MBUZ NMOS VTO=1.162 KP=0.157
M2 99 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 99 8 8 MSW
COX 99 8 0.025N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.013N M=0.506 VJ=0.997
CGS 100 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-5.72 KP=0.07
V7 99 11 4.5
LG 76 11 7N
.ENDS
*******
*n-MOSFET*240V 130mA 16 Ohm*Add_in_Line
.SUBCKT BSS-101 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 213M
D101 76 95 DREV
.MODEL DREV D CJO=0.017N RS=20M TT=20N IS=300P BV=240
M101 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.448 KP=0.104
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.09N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.012N M=0.383 VJ=0.948
CGS 76 11 0.055N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-9.707 KP=.015
LG 4 1 7N
.ENDS
*******
*p-MOSFET*50V 170mA 10 Ohm*Add_in_Line
.SUBCKT BSS-110 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 3246M
D110 86 76 DREV
.MODEL DREV D CJO=0.035N RS=20M TT=60N IS=300P BV=50
M110 86 11 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.462 KP=0.04
M2 11 86 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.183N
DGD 86 8 DCGD
.MODEL DCGD D CJO=0.183N M=0.439 VJ=1.097
CGS 76 11 0.02N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*100V 170mA 6 Ohm*Add_in_Line
.SUBCKT BSS-119 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 59
RS 5 76 1.045
D119 76 97 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=30N IS=300P BV=100
M119 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.999 KP=0.134
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.025N
DGD 8 98 DCGD
.MODEL DCGD D CJO=22.4P M=0.688 VJ=1.082
CGS 76 99 0.039N
VGC 87 99 2
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-4.859 KP=0.073
LG 95 1 7N
.ENDS
*******
*n-MOSFET*600V 100mA 45 Ohm*Add_in_Line
.SUBCKT BSS-125 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 160M
D125 76 95 DREV
.MODEL DREV D CJO=0.02N RS=50M TT=150N IS=300P BV=600
M125 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.012 KP=0.168
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 0.1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.011N M=0.371 VJ=0.969
CGS 76 11 0.095N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-17.18 KP=0.00215
LG 4 1 7N
.ENDS
*******
*Depl-MOS*240V 150mA 20 Ohm*Add_in_Line
.SUBCKT BSS-129 1 2 3
LS 5 2 7N
LD 83 3 5N
RG 4 11 5
RS 5 76 1M
DBSS129 76 83 DREV
.MODEL DREV D CJO=30P RS=20M TT=50N IS=30P BV=240
+
MBSS129 90 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-1.30 KP=0.165
M2 11 90 8 8 MSW
.MODEL MSW NMOS VTO=5 KP=25
+
M3 90 11 8 8 MSW
COX 11 8 66P
DGD 8 90 DCGD
.MODEL DCGD D CJO=13.57P M=0.475 VJ=1.062
CGS 76 11 25P
RDR 90 83 2
LG 4 1 7N
.ENDS
*******
*Depl-MOS*600V 80mA 60 Ohm*Add_in_Line
.SUBCKT BSS-135 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 5.5M
RS 5 76 392M
D135 76 97 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=50N IS=300P BV=600
M135 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-1.164 KP=0.159
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 98 87 8 8 MSW
COX 87 8 0.025N
DGD 8 98 DCGD
.MODEL DCGD D CJO=37P M=0.833 VJ=1.147
CGS 76 99 0.065N
VGC 87 99 8
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-17.03 KP=0.0018
LG 95 1 7N
.ENDS
*******
*n-MOSFET*50V 220mA 3.5 Ohm*Add_in_Line
*.SUBCKT BSS-138 1 2 3
*LS 5 2 7N
*LD 95 3 5N
*RG 4 11 5.5M
*RS 5 76 871M
*D138 76 95 DREV
*.MODEL DREV D CJO=0.06N RS=20M TT=15N IS=300P BV=50
*M138 86 11 76 96 MBUZ
*.MODEL MBUZ NMOS VTO=1.281 KP=0.186
*M2 11 86 8 8 MSW
*.MODEL MSW NMOS VTO=0.001 KP=5
*M3 86 11 8 8 MSW
*COX 11 8 0.08N
*DGD 8 86 DCGD
*.MODEL DCGD D CJO=0.062N M=0.791 VJ=1.174
*CGS 76 11 0.03N
*MRDR 86 86 95 86 MVRD
*.MODEL MVRD NMOS VTO=-48.9 KP=.045
*LG 4 1 7N
*.ENDS
*******
*n-MOSFET*65V 220mA 3.5 Ohm*Add_in_Line
.SUBCKT BSS-145 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 96 385M
D145 96 95 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=70N IS=300P BV=65
M145 86 11 96 96 MBUZ
.MODEL MBUZ NMOS VTO=1.93 KP=0.145
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.044N M=0.857 VJ=1.077
CGS 96 11 0.059N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-70.541 KP=0.034
LG 4 1 7N
.ENDS
*******
*Depl-MOS*250V 70mA 100 Ohm*Add_in_Line
.SUBCKT BSS-229 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 40
RS 5 76 349M
D229 76 97 DREV
.MODEL DREV D CJO=0.02N RS=20M TT=50N IS=300P BV=250
M229 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-0.85 KP=0.107
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.01N
DGD 8 98 DCGD
.MODEL DCGD D CJO=8P M=0.545 VJ=1.004
CGS 76 99 0.07N
VGC 87 99 5
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-8.608 KP=0.0046
LG 95 1 7N
.ENDS
*******
*n-MOSFET*50V 1400mA 0.3 Ohm*Add_in_Line
.SUBCKT BSS-295 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 1 76 5.5M
RS 5 100 137M
D295 100 95 DREV
.MODEL DREV D CJO=0.25N RS=20M TT=300N IS=300P BV=50
M295 86 11 100 100 MBUZ
.MODEL MBUZ NMOS VTO=1.174 KP=0.924
M2 99 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 99 8 8 MSW
COX 99 8 0.55N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.167N M=0.522 VJ=0.996
CGS 100 11 0.33N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-7.196 KP=5
V7 99 11 3.5
LG 76 11 7N
.ENDS
*******
*n-MOSFET*100V 800mA 0.8 Ohm*Add_in_Line
.SUBCKT BSS-296 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 18.4
RS 5 76 0.163
D296 76 97 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=150N IS=300P BV=100
M296 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.28 KP=0.82
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.15N
DGD 8 98 DCGD
.MODEL DCGD D CJO=83.8P M=0.518 VJ=0.994
CGS 76 99 0.37N
VGC 87 99 4
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-8.21 KP=0.29
LG 95 1 7N
.ENDS
*******
*n-MOSFET*200V 480mA 2 Ohm*Add_in_Line
.SUBCKT BSS-297 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 20.8
RS 5 76 0.092
D297 76 97 DREV
.MODEL DREV D CJO=0.22N RS=20M TT=150N IS=300P BV=200
M297 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.47 KP=0.998
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.12N
DGD 8 98 DCGD
.MODEL DCGD D CJO=65.74P M=0.533 VJ=0.989
CGS 76 99 0.32N
VGC 87 99 4
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-9.5 KP=0.11
LG 95 1 7N
.ENDS
*******
*p-MOSFET*50V 130mA 10 Ohm*Add_in_Line
.SUBCKT BSS-84 1 2 3
LS 5 2 7N
LD 87 3 5N
RG 4 11 5.5M
RS 5 76 3759M
D84 87 76 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=45N IS=300P BV=50
M84 87 11 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.585 KP=0.041
M2 11 87 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 87 11 8 8 MSW
COX 11 8 0.1N
DGD 87 8 DCGD
.MODEL DCGD D CJO=0.183N M=0.439 VJ=1.097
CGS 76 11 0.021N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*240V 290mA 6 Ohm*Add_in_Line
.SUBCKT BSS-87 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 193M
D87 76 95 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=30N IS=300P BV=240
M87 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.475 KP=0.212
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.032N M=0.448 VJ=0.974
CGS 76 11 0.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-11.44 KP=0.026
LG 4 1 7N
.ENDS
*******
*n-MOSFET*240V 250mA 8 Ohm*Add_in_Line
.SUBCKT BSS-88 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 1 76 5.5M
RS 5 100 242M
D88 100 95 DREV
.MODEL DREV D CJO=0.05N RS=20M TT=20N IS=300P BV=240
M88 86 11 100 100 MBUZ
.MODEL MBUZ NMOS VTO=0.782 KP=0.195
M2 99 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 99 8 8 MSW
COX 99 8 0.06N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.25N M=0.44 VJ=0.968
CGS 100 11 0.08N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-8.481 KP=0.037
V7 99 11 5.5
LG 76 11 7N
.ENDS
*******
*n-MOSFET*240V 290mA 6 Ohm*Add_in_Line
.SUBCKT BSS-89 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 164M
DSS89 76 95 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=30N IS=300P BV=240
MSS89 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.651 KP=0.227
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.035N M=0.493 VJ=0.983
CGS 76 11 0.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.86 KP=0.032
LG 4 1 7N
.ENDS
*******
*p-MOSFET*240V 150mA 20 Ohm*Add_in_Line
.SUBCKT BSS-92_1 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 5.5M
RS 5 76 1084M
D92 97 76 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=35N IS=300P BV=240
M92 98 99 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.721 KP=0.071
M2 87 98 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 98 87 8 8 MSW
COX 87 8 0.2N
DGD 98 8 DCGD
.MODEL DCGD D CJO=59P M=0.542 VJ=0.979
CGS 76 99 0.085N
VGC 87 99 -20
MHELP 98 98 97 98 MVRD
.MODEL MVRD PMOS VTO=31.5 KP=0.006
LG 95 1 7N
.ENDS
*******
*p-MOSFET*240V 150mA 20 Ohm*Add_in_Line
.SUBCKT BSS-92 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 86 87 5.5M
RS 5 76 886M
D92 97 76 DREV
.MODEL DREV D CJO=0.05N RS=20M TT=35N IS=300P BV=240
M92 98 87 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.489 KP=0.049
M2 87 98 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 98 87 8 8 MSW
COX 87 8 0.15N
DGD 98 8 DCGD
.MODEL DCGD D CJO=120P M=0601 VJ=0.47
CGS 76 87 0.06N
MHELP 98 98 97 98 MVRD
.MODEL MVRD PMOS VTO=20.07 KP=0.008
LG 86 1 7N
.ENDS
*******
*n-MOSFET*50V 300mA 3.5 Ohm*Add_in_Line
.SUBCKT BSS-98 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 663M
D98 76 95 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=2.2N IS=300P BV=50
M98 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.099 KP=0.15
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.062N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.062N M=0.791 VJ=1.174
CGS 76 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-48.9 KP=.2
LG 4 1 7N
.ENDS
*******

*$
.SUBCKT K_50_n_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1
             
.PARAM  Wcml=0.945   c=0.76      Vth0=1.25    auth=3m      nb=1.4       
.PARAM  aubr=51m     lnBr=-23    Ubr=67       UTnbr=207m 

.PARAM  Rd=180m      nmu=3       Tref=298     T0=273       lnIsj=-23.76
.PARAM  ndi=1.2      Rdi=55m     nmu2=0       ta=60n       td=20n
.PARAM  Rf=0.5       ph0=35.5    ph1=62m      rpa=7m

.PARAM  f1=130p      f2=150p     f3=195p      f4=180p     f5=314p
.PARAM  U0=500m      nd=0.4      nc=0.5       g1=1.3      bb=-3.7
.PARAM  sl=55p       kbq=85.8u
       
.PARAM  Vmin=0.85     Vmax=1.65    dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*((T0/Tref)**nb)*a}
.PARAM  Rlim={(Rmax-Rp-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)}  
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bmin={c/Inn/(Rs**2-(2*Rs-1/gmin)/gmin)*(Tref/T0)**nb}
.PARAM  bet={Wcml+if(dR==0,if(dVth==0,(Wcml-bmin/a)*(limit(dgfs,-1,0)),0),0)}
.PARAM  dC1={1+dCmax*limit(dC,0,1)} 

.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  dRdi={Rdi/a}

.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*(T0/T)**nb*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(abs(Uds),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),12))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}

E_Eds     d1 edep  VALUE {(V(d1,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/100}
C_Cds3   d    s   {Cds0/100}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
V_sense4  d0   d  0
E_RMos   d1   d0  VALUE={I(V_sense4)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense4)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*1/(1-nd)*U0**nd*(limit(U0+V(d1,s),0,2*UBr))**(1-nd)}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  1k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

*****************************************************************************************************

.SUBCKT K_60_a_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=1.2       beta4c=0.5     ph0=25.7       ph1=0.038      Ubr=72
.PARAM  Rd=0.165       nmu=2.4        Rf=0.2         rpa=0.00325    lnIsj=-23.8
.PARAM  Rdi=0.039

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=80p         f2=189p        f3=225p        f4=130p        f5=350p
.PARAM  U0=0.5         nd=0.44        nc=0.5         g1=0.5         bb=0
.PARAM  sl=100p        remp=0p        ta=50n         td=20n

.PARAM  Vmin=0.6       Vmax=1.4       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_60_b_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=1.3       beta4c=0.5     ph0=25.7       ph1=0.038      Ubr=72
.PARAM  Rd=0.165       nmu=2.4        Rf=0.2         rpa=0.00325    lnIsj=-23.8
.PARAM  Rdi=0.039

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=80p         f2=189p        f3=225p        f4=130p        f5=350p
.PARAM  U0=0.5         nd=0.44        nc=0.5         g1=0.5         bb=0
.PARAM  sl=100p        remp=0p        ta=50n         td=20n

.PARAM  Vmin=0.8       Vmax=1.8       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_60_c_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=2.07      beta4c=0.5     ph0=25.7       ph1=0.038      Ubr=72
.PARAM  Rd=0.165       nmu=2.4        Rf=0.2         rpa=0.00325    lnIsj=-23.8
.PARAM  Rdi=0.039

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=80p         f2=189p        f3=225p        f4=130p        f5=350p
.PARAM  U0=0.5         nd=0.44        nc=0.5         g1=0.5         bb=0
.PARAM  sl=100p        remp=0p        ta=50n         td=20n

.PARAM  Vmin=1.3       Vmax=2.3       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_60_d_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=-2.35     beta4c=0.5     ph0=20         ph1=0.026      Ubr=72
.PARAM  Rd=0.165       nmu=2.4        Rf=0.2         rpa=0.00325    lnIsj=-23.8
.PARAM  Rdi=0.039

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=70p         f2=189p        f3=225p        f4=270p        f5=360p
.PARAM  U0=0.5         nd=0.44        nc=0.5         g1=0.3         bb=0
.PARAM  sl=50p         remp=0p        ta=50n         td=20n

.PARAM  Vmin=-3.5      Vmax=-2.4      dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_100_a_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=1.45      beta4c=0.215   ph0=25.7       ph1=0.038      Ubr=150
.PARAM  Rd=0.6         nmu=2.6        Rf=0.2         rpa=0.02925    lnIsj=-24.6
.PARAM  Rdi=0.073

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=118p        f2=94p         f3=140p        f4=205p        f5=267p
.PARAM  U0=0.5         nd=0.48        nc=0.5         g1=4           bb=-3.2
.PARAM  sl=58p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=0.8       Vmax=1.8       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_100_b_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=1.6       beta4c=0.303   ph0=25.7       ph1=0.038      Ubr=150
.PARAM  Rd=0.6         nmu=2.6        Rf=0.2         rpa=0.02925    lnIsj=-24.6
.PARAM  Rdi=0.073

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=118p        f2=118p        f3=207p        f4=205p        f5=217p
.PARAM  U0=0.5         nd=0.42        nc=0.5         g1=4           bb=-3.2
.PARAM  sl=58p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=0.8       Vmax=1.8       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_100_c_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=2.07      beta4c=0.303   ph0=25.7       ph1=0.038      Ubr=150
.PARAM  Rd=0.6         nmu=2.6        Rf=0.2         rpa=0.02925    lnIsj=-24.6
.PARAM  Rdi=0.073

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=118p        f2=118p        f3=207p        f4=205p        f5=217p
.PARAM  U0=0.5         nd=0.42        nc=0.5         g1=4           bb=-3.2
.PARAM  sl=58p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=1.3       Vmax=2.3       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_100_d_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=-1.8      beta4c=0.303   ph0=20         ph1=0.026      Ubr=150
.PARAM  Rd=0.6         nmu=2.6        Rf=0.2         rpa=0.02925    lnIsj=-24.6
.PARAM  Rdi=0.073

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=118p        f2=118p        f3=207p        f4=330p        f5=217p
.PARAM  U0=0.5         nd=0.42        nc=0.5         g1=4           bb=-10.8
.PARAM  sl=30p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=-2.9      Vmax=-1.8      dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_200_a_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=1.45      beta4c=0.215   ph0=25.7       ph1=0.038      Ubr=257
.PARAM  Rd=1.65        nmu=2.6        Rf=0.2         rpa=0.05733    lnIsj=-24.6
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=60p         f2=78p         f3=140p        f4=265p        f5=325p
.PARAM  U0=0.5         nd=0.5         nc=0.5         g1=2.2         bb=-3
.PARAM  sl=65p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=0.8       Vmax=1.8       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_200_d_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=-1.05     beta4c=0.215   ph0=20         ph1=0.026      Ubr=257
.PARAM  Rd=1.65        nmu=2.6        Rf=0.2         rpa=0.05733    lnIsj=-24.6
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=108p        f2=78p         f3=140p        f4=315p        f5=325p
.PARAM  U0=0.5         nd=0.5         nc=0.5         g1=4           bb=-9
.PARAM  sl=35p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=-2.1      Vmax=-1        dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_240_a_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=1.45      beta4c=0.217   ph0=25.7       ph1=0.038      Ubr=290
.PARAM  Rd=1.95        nmu=2.6        Rf=0.2         rpa=0.06877    lnIsj=-24.7
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=65p         f2=92p         f3=198p        f4=265p        f5=290p
.PARAM  U0=0.5         nd=0.44        nc=0.5         g1=1.9         bb=-3
.PARAM  sl=65p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=0.8       Vmax=1.8       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_240_b_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=1.5       beta4c=0.243   ph0=25.7       ph1=0.038      Ubr=290
.PARAM  Rd=1.95        nmu=2.6        Rf=0.2         rpa=0.06877    lnIsj=-24.7
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=65p         f2=69p         f3=139p        f4=310p        f5=270p
.PARAM  U0=0.5         nd=0.47        nc=0.5         g1=1.9         bb=-3.3
.PARAM  sl=65p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=0.8       Vmax=1.8       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_240_c_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=1.1       beta4c=0.243   ph0=25.7       ph1=0.038      Ubr=290
.PARAM  Rd=1.95        nmu=2.6        Rf=0.2         rpa=0.06877    lnIsj=-24.7
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=65p         f2=69p         f3=139p        f4=310p        f5=270p
.PARAM  U0=0.5         nd=0.47        nc=0.5         g1=1.9         bb=-3.3
.PARAM  sl=65p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=0.6       Vmax=1.4       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_240_d_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=-1.05     beta4c=0.243   ph0=20         ph1=0.026      Ubr=290
.PARAM  Rd=1.95        nmu=2.6        Rf=0.2         rpa=0.06877    lnIsj=-24.7
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=65p         f2=69p         f3=139p        f4=360p        f5=270p
.PARAM  U0=0.5         nd=0.47        nc=0.5         g1=1.9         bb=-7
.PARAM  sl=45p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=-2.1      Vmax=-1        dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_250_d_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=-1.1      beta4c=0.217   ph0=20         ph1=0.026      Ubr=295
.PARAM  Rd=2           nmu=2.6        Rf=0.15        rpa=0.10933    lnIsj=-24.7
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=65p         f2=85p         f3=198p        f4=305p        f5=314p
.PARAM  U0=0.5         nd=0.45        nc=0.5         g1=2.2         bb=-7.5
.PARAM  sl=31p         remp=0p        ta=60n         td=20n

.PARAM  Vmin=-2.1      Vmax=-1        dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_400_a_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=2.07      beta4c=0.157   ph0=25.7       ph1=0.038      Ubr=495
.PARAM  Rd=5.75        nmu=2.65       Rf=0.12        rpa=0.28717    lnIsj=-24.7
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=80p         f2=54p         f3=204p        f4=320p        f5=390p
.PARAM  U0=0.5         nd=0.42        nc=0.5         g1=4           bb=-1.5
.PARAM  sl=150p        remp=0p        ta=60n         td=20n

.PARAM  Vmin=1.3       Vmax=2.3       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  10k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_600_a_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=2.07      beta4c=0.157   ph0=25.7       ph1=0.038      Ubr=650
.PARAM  Rd=11          nmu=2.7        Rf=0.1         rpa=0.58357    lnIsj=-24.7
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=80p         f2=60p         f3=204p        f4=320p        f5=390p
.PARAM  U0=0.5         nd=0.42        nc=0.5         g1=7           bb=-1.5
.PARAM  sl=150p        remp=0p        ta=60n         td=20n

.PARAM  Vmin=1.3       Vmax=2.3       dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  20k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_600_d_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=-1.15     beta4c=0.157   ph0=20         ph1=0.026      Ubr=650
.PARAM  Rd=11          nmu=2.7        Rf=0.1         rpa=0.58357    lnIsj=-24.7
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=100p        f2=60p         f3=204p        f4=435p        f5=355p
.PARAM  U0=0.5         nd=0.43        nc=0.5         g1=9           bb=-9.8
.PARAM  sl=37p         remp=0p        ta=100n        td=30n

.PARAM  Vmin=-2.1      Vmax=-1        dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  20k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

**************************************************************************************


.SUBCKT K_600_e_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1

.PARAM  Vth0=-1.75     beta4c=0.206   ph0=20         ph1=0.026      Ubr=650
.PARAM  Rd=11          nmu=2.7        Rf=0.1         rpa=0.58357    lnIsj=-24.7
.PARAM  Rdi=0.2

.PARAM  Tref=298     T0=273      auth=3m      c=0.82       mu_bet=0.4
.PARAM  f_bet=-2     ndi=1.2     UTnbr=207m   lnBr=-23     kbq=85.8u
.PARAM  Wcml={beta4c*4*c}        
.PARAM  aubr={0.93m*UBr}
.PARAM  dvgs={0.1-0.06*Vth0}

.PARAM  f1=100p        f2=100p        f3=500p        f4=435p        f5=500p
.PARAM  U0=0.5         nd=0.4         nc=0.5         g1=9           bb=-9.8
.PARAM  sl=37p         remp=2p        ta=60n         td=20n

.PARAM  Vmin=-2.7      Vmax=-1.6      dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*a*((1-f_bet)*(T0/Tref)**mu_bet+f_bet)    }
.PARAM  Rlim={(Rmax-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)} 
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bet={Wcml}

.PARAM  dC1={1+dCmax*limit(dC,0,1)} 
.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Crand={remp*SQRT(a)}
.PARAM  dRdi={Rdi/a}

.FUNC U1(Uds,T)       {(SQRT(1+4*(0.4+(T-T0-25)*2m)*abs(Uds))-1)/2/(0.4+(T-T0-25)*2m)}
.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*((1-f_bet)*(T0/T)**mu_bet+f_bet)*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(U1(Uds,T),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     d   ox  VALUE {V(d,g)-(min(V(d,g),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(d,g)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    d   ox1 VALUE {V(d,g)-QCdg(V(d,g),limit(V(d,g),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Crand}

E_Eds     d edep  VALUE {(V(d2,s)-I(V_sense3)/Cds0)}
C_Cds  edep    s  {Cds0}
C_Cds2   d2    s  {Cds0/500}

C_Cgs     g    s  {Cgs0}

G_chan    d    s  VALUE={Iges(V(d,s),V(g,s),T0+limit(V(Tj),-200,350))}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d2  VALUE={Idiod(V(s,d2),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

L_L001    a    c  {td/(ta+td)}
R_R001    a    b  {1/ta}
V_sense3  c    f  0
R_sense3  f    0  1
E_E001    b    0  VALUE {I(V_sense2)}
E_E002    e    0  VALUE {1Meg*Cds0*(1/(1-nd)*U0**nd*(limit(U0+V(d2,s),U0/2,2*UBr))**(1-nd)+2**nd*min(V(d2,s)+U0/2,0))}
R_R002    e    c  1Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  100k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$



*****************************************************************************************************
*****************************************************************************************************
*****************************************************************************************************

.SUBCKT K_100p_l_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1
             
.PARAM  Wcml=0.852   c=0.385     Vth0=1.6     auth=2.2m    nb=1.7       
.PARAM  aubr=120m    lnBr=-23    Ubr=128      UTnbr=207m 

.PARAM  Rd=830m      nmu=2       Tref=298     T0=273       lnIsj=-25.3
.PARAM  ndi=1.2      Rdi=54m     nmu2=0       ta=60n       td=10n
.PARAM  Rf=0         ph0=33.7    ph1=58m      rpa=0

.PARAM  f1=260p      f2=100p     f3=130p      f4=10p      f5=153p
.PARAM  U0=500m      nd=0.42     nc=0.5       g1=13       bb=0
.PARAM  sl=50p       kbq=85.8u
       
.PARAM  Vmin=1.1     Vmax=2.1    dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*((T0/Tref)**nb)*a}
.PARAM  Rlim={(Rmax-Rp-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)}  
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bmin={c/Inn/(Rs**2-(2*Rs-1/gmin)/gmin)*(Tref/T0)**nb}
.PARAM  bet={Wcml+if(dR==0,if(dVth==0,(Wcml-bmin/a)*(limit(dgfs,-1,0)),0),0)}
.PARAM  dC1={1+dCmax*limit(dC,0,1)} 

.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  dRdi={Rdi/a}
.PARAM  Cox2={1p*SQRT(a)*dC1}

.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*(T0/T)**nb*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(abs(Uds),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     ox  d   VALUE {V(g,d)-(min(V(g,d),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(g,d)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    ox1 d   VALUE {V(g,d)-QCdg(V(g,d),limit(V(g,d),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Cox2}

E_Eds     edep d  VALUE {V(s,d)-1/(1-nd)*((U0**nd*(limit(U0+V(s,d),0,2*UBr))**(1-nd))-U0)}
C_Cds  edep    s  {Cds0}

C_Cgs     g    s  {Cgs0}

G_chan    s    d  VALUE={Iges(V(s,d),V(s,g),T0+limit(V(Tj),-200,350))+LIMIT(I(V_sense3),-1k,1k)}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode  d2    s  VALUE={Idiod(V(d2,s),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

C_C001    a    0  {ta*td/(ta+td)}
R_R001    a    b  1
V_sense3  b    c  0
E_E001    c    0  VALUE {ta/td*I(V_sense2)}

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  1k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

*****************************************************************************************************

.SUBCKT K_100p_n_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1
             
.PARAM  Wcml=0.539   c=0.435     Vth0=3.2     auth=3m      nb=1.5       
.PARAM  aubr=120m    lnBr=-23    Ubr=125      UTnbr=207m 

.PARAM  Rd=900m      nmu=2       Tref=298     T0=273       lnIsj=-25.4
.PARAM  ndi=1.2      Rdi=35m     nmu2=0       ta=40n       td=10n
.PARAM  Rf=0         ph0=23.6    ph1=40m      rpa=0

.PARAM  f1=180p      f2=100p     f3=112p      f4=10p     f5=116p
.PARAM  U0=500m      nd=0.44     nc=0.5       g1=9       bb=0
.PARAM  sl=550p      kbq=85.8u
       
.PARAM  Vmin=2.3     Vmax=4.2    dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*((T0/Tref)**nb)*a}
.PARAM  Rlim={(Rmax-Rp-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)}  
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bmin={c/Inn/(Rs**2-(2*Rs-1/gmin)/gmin)*(Tref/T0)**nb}
.PARAM  bet={Wcml+if(dR==0,if(dVth==0,(Wcml-bmin/a)*(limit(dgfs,-1,0)),0),0)}
.PARAM  dC1={1+dCmax*limit(dC,0,1)} 

.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  dRdi={Rdi/a}
.PARAM  Cox2={2p*SQRT(a)*dC1}

.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*(T0/T)**nb*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(abs(Uds),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     ox  d   VALUE {V(g,d)-(min(V(g,d),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(g,d)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    ox1 d   VALUE {V(g,d)-QCdg(V(g,d),limit(V(g,d),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Cox2}

E_Eds     edep d  VALUE {V(s,d)-1/(1-nd)*((U0**nd*(limit(U0+V(s,d),0,2*UBr))**(1-nd))-U0)}
C_Cds  edep    s  {Cds0}

C_Cgs     g    s  {Cgs0}

G_chan    s    d  VALUE={Iges(V(s,d),V(s,g),T0+limit(V(Tj),-200,350))+LIMIT(I(V_sense3),-1k,1k)}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode  d2    s  VALUE={Idiod(V(d2,s),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

C_C001    a    0  {ta*td/(ta+td)}
R_R001    a    b  1
V_sense3  b    c  0
E_E001    c    0  VALUE {ta/td*I(V_sense2)}

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  1k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

*****************************************************************************************************

.SUBCKT K_250p_l_var dd g s Tj PARAMS: a=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmin=1 Rs=1 Rp=1 dC=0 heat=1
             
.PARAM  Wcml=0.487   c=0.355     Vth0=1.6     auth=2.4m    nb=1.7       
.PARAM  aubr=270m    lnBr=-23    Ubr=300      UTnbr=207m 

.PARAM  Rd=5         nmu=2.1     Tref=298     T0=273       lnIsj=-25.05
.PARAM  ndi=1.2      Rdi=130m    nmu2=0       ta=40n       td=10n
.PARAM  Rf=0         ph0=31.7    ph1=53m      rpa=0

.PARAM  f1=150p      f2=57p      f3=115p      f4=100p     f5=180p
.PARAM  U0=500m      nd=0.45     nc=0.5       g1=15       bb=0
.PARAM  sl=500p      kbq=85.8u
       
.PARAM  Vmin=1.1     Vmax=2.1    dCmax=0.35
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  p0={Wcml*((T0/Tref)**nb)*a}
.PARAM  Rlim={(Rmax-Rp-Rs-(Unn-Vth0-Inn*Rs-SQRT((Unn-Vth0-Inn*Rs)**2-4*c*Inn/p0))/(2*c*Inn))/(1+rpa*(Inn/a)**2)}  
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a,0),0)} 
.PARAM  bmin={c/Inn/(Rs**2-(2*Rs-1/gmin)/gmin)*(Tref/T0)**nb}
.PARAM  bet={Wcml+if(dR==0,if(dVth==0,(Wcml-bmin/a)*(limit(dgfs,-1,0)),0),0)}
.PARAM  dC1={1+dCmax*limit(dC,0,1)} 

.PARAM  Cox={f1*a*dC1}
.PARAM  Cds0={f2*a*dC1}
.PARAM  Cgs0={f3*a*dC1}
.PARAM  Cox1={f5*a*dC1}
.PARAM  Cox2={2p*SQRT(a)*dC1}
.PARAM  dRdi={Rdi/a}

.FUNC I2(p,Uee,z1,pp) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp-(min(0,Uee))**2)/p))}
.FUNC Ig(Uds,T,p,Uee) {bet*(T0/T)**nb*I2(p,Uee,min(Uds,Uee/(2*c)),min(2*p,p+c*Uds))}
.FUNC Iges(Uds,Ugs,T) 
 +{a*(sgn(Uds)*Ig(abs(Uds),T,1/(ph0-ph1*T),Ugs-Vth+auth*(T-Tref))+exp(min(lnBr+(abs(Uds)-UBr-aubr*(T-Tref))/UTnbr,25)))}

.FUNC Isjt(Tj)           {exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),9))*(Tj/Tref)**1.5}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),9))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,Isjt(Tj))}

.FUNC QCdg(x,z)  {if(f4>f5,(f5**2-(f4-z*sl)**2)/(2*sl)+f5*min(x,(f4-f5)/sl),f4*z-sl*z**2/2-f5*max((f4-f5)/sl-x,0))}

E_Edg     ox  d   VALUE {V(g,d)-(min(V(g,d),-bb)+1/(g1*(1-nc))*((1/(1+g1*max(V(g,d)+bb,0)))**(nc-1)-1))}
C_Cdg     ox  g   {Cox}
E_Edg1    ox1 d   VALUE {V(g,d)-QCdg(V(g,d),limit(V(g,d),(f4-f5)/sl,f4/sl))/f5}
C_Cdg1    ox1 g   {Cox1}
C_Cdg2    d   g   {Cox2}

E_Eds     edep d  VALUE {V(s,d)-1/(1-nd)*((U0**nd*(limit(U0+V(s,d),0,2*UBr))**(1-nd))-U0)}
C_Cds  edep    s  {Cds0}

C_Cgs     g    s  {Cgs0}

G_chan    s    d  VALUE={Iges(V(s,d),V(s,g),T0+limit(V(Tj),-200,350))+LIMIT(I(V_sense3),-1k,1k)}
E_RMos   d1    d  VALUE={I(V_sense)*(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)*(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode  d2    s  VALUE={Idiod(V(d2,s),T0+limit(V(Tj),-200,499))}
R_Rdio   d2   d3  {dRdi}
V_sense2 d1   d3  0

C_C001    a    0  {ta*td/(ta+td)}
R_R001    a    b  1
V_sense3  b    c  0
E_E001    c    0  VALUE {ta/td*I(V_sense2)}

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  1k

G_TH      0    Tj  VALUE = {heat*LIMIT(I(V_sense)*V(dd,s),0,100k)}

.ENDS
*$

*****************************************************************************************************

*****************************************************************************************************
.SUBCKT BSS138N drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.23     Unn=10       Rmax=3.5
.PARAM act=0.13

X1  d1 g s Tj K_60_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {414.65m+limit(Zthtype,0,1)*153.45m}
Rth2  t1      t2              {1.8+limit(Zthtype,0,1)*672.5m}
Rth3  t2      t3              {7.56+limit(Zthtype,0,1)*3.62}
Rth4  t3      t4              {68.58+limit(Zthtype,0,1)*56.4}
Rth5  t4      Tcase           {80+limit(Zthtype,0,1)*65.8}
Cth1  Tj      0               1.508u
Cth2  t1      0               2.286u
Cth3  t2      0               15.089u
Cth4  t3      0               374u
Cth5  t4      0               4.7m


.ENDS
*$

********************

.SUBCKT SISC0_3N06E1_0 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.005     Rg=25        
.PARAM Inn=0.23     Unn=10       Rmax=3.5
.PARAM act=0.13

X1  drain g s Tj K_60_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg

Rth1  Tj      t1              {414.65m+limit(Zthtype,0,1)*153.45m}
Rth2  t1      t2              {1.8+limit(Zthtype,0,1)*672.5m}
Rth3  t2      t3              {9.83+limit(Zthtype,0,1)*3.62}
Rth4  t3      t4              {1p+limit(Zthtype,0,1)*0}
Rth5  t4      Tcase           {1p+limit(Zthtype,0,1)*0}
Cth1  Tj      0               1.508u
Cth2  t1      0               2.286u
Cth3  t2      0               15.089u
Cth4  t3      0               1p
Cth5  t4      0               1p


.ENDS

********************

.SUBCKT BSS138W drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.054     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.2      Unn=10       Rmax=3.5
.PARAM act=0.13

X1  d1 g s Tj K_60_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {414.65m+limit(Zthtype,0,1)*153.45m}
Rth2  t1      t2              {1.8+limit(Zthtype,0,1)*672.5m}
Rth3  t2      t3              {7.56+limit(Zthtype,0,1)*3.62}
Rth4  t3      t4              {41.47+limit(Zthtype,0,1)*17.99}
Rth5  t4      Tcase           {25.33+limit(Zthtype,0,1)*10.99}
Cth1  Tj      0               1.508u
Cth2  t1      0               2.286u
Cth3  t2      0               15.089u
Cth4  t3      0               394.032u
Cth5  t4      0               3m


.ENDS
*$

********************

.SUBCKT SN7002N drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.5      Unn=10       Rmax=5
.PARAM act=0.13

X1  d1 g s Tj K_60_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {414.65m+limit(Zthtype,0,1)*153.45m}
Rth2  t1      t2              {1.8+limit(Zthtype,0,1)*672.5m}
Rth3  t2      t3              {7.56+limit(Zthtype,0,1)*3.62}
Rth4  t3      t4              {68.58+limit(Zthtype,0,1)*56.4}
Rth5  t4      Tcase           {80+limit(Zthtype,0,1)*65.8}
Cth1  Tj      0               1.508u
Cth2  t1      0               2.286u
Cth3  t2      0               15.089u
Cth4  t3      0               374u
Cth5  t4      0               4.7m


.ENDS
*$

********************

.SUBCKT SISC0_3N06E1_4 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.005     Rg=25
.PARAM Inn=0.5      Unn=10       Rmax=5
.PARAM act=0.13

X1  drain g s Tj K_60_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



Rth1  Tj      t1              {414.65m+limit(Zthtype,0,1)*153.45m}
Rth2  t1      t2              {1.8+limit(Zthtype,0,1)*672.5m}
Rth3  t2      t3              {9.83+limit(Zthtype,0,1)*3.62}
Rth4  t3      t4              {1p+limit(Zthtype,0,1)*0}
Rth5  t4      Tcase           {1p+limit(Zthtype,0,1)*0}
Cth1  Tj      0               1.508u
Cth2  t1      0               2.286u
Cth3  t2      0               15.089u
Cth4  t3      0               1p
Cth5  t4      0               1p


.ENDS

********************


.SUBCKT SN7002W drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.054     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.16     Unn=10       Rmax=5
.PARAM act=0.13

X1  d1 g s Tj K_60_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {414.65m+limit(Zthtype,0,1)*153.45m}
Rth2  t1      t2              {1.43+limit(Zthtype,0,1)*265.7u}
Rth3  t2      t3              {5.53+limit(Zthtype,0,1)*0p}
Rth4  t3      t4              {40.89+limit(Zthtype,0,1)*22.38}
Rth5  t4      Tcase           {25.33+limit(Zthtype,0,1)*13.87}
Cth1  Tj      0               1.508u
Cth2  t1      0               2.286u
Cth3  t2      0               15.089u
Cth4  t3      0               394.032u
Cth5  t4      0               3m


.ENDS
*$

********************

.SUBCKT BSS7728N drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.5      Unn=10       Rmax=7.5
.PARAM act=0.13

X1  d1 g s Tj K_60_c_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {414.65m+limit(Zthtype,0,1)*153.45m}
Rth2  t1      t2              {1.8+limit(Zthtype,0,1)*672.5m}
Rth3  t2      t3              {7.56+limit(Zthtype,0,1)*3.62}
Rth4  t3      t4              {68.58+limit(Zthtype,0,1)*56.4}
Rth5  t4      Tcase           {80+limit(Zthtype,0,1)*65.8}
Cth1  Tj      0               1.508u
Cth2  t1      0               2.286u
Cth3  t2      0               15.089u
Cth4  t3      0               374u
Cth5  t4      0               4.7m


.ENDS
*$

********************

.SUBCKT BSS159N drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.07     Unn=0        Rmax=8
.PARAM act=0.13

X1  d1 g s Tj K_60_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {414.65m+limit(Zthtype,0,1)*153.45m}
Rth2  t1      t2              {1.8+limit(Zthtype,0,1)*672.5m}
Rth3  t2      t3              {7.56+limit(Zthtype,0,1)*3.62}
Rth4  t3      t4              {68.58+limit(Zthtype,0,1)*56.4}
Rth5  t4      Tcase           {80+limit(Zthtype,0,1)*65.8}
Cth1  Tj      0               1.508u
Cth2  t1      0               2.286u
Cth3  t2      0               15.089u
Cth4  t3      0               374u
Cth5  t4      0               4.7m


.ENDS
*$

********************

.SUBCKT SISC0_3N06D drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.005     Rg=10
.PARAM Inn=0.07     Unn=0        Rmax=8
.PARAM act=0.13

X1  drain g s Tj K_60_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg


Rth1  Tj      t1              {414.65m+limit(Zthtype,0,1)*153.45m}
Rth2  t1      t2              {1.8+limit(Zthtype,0,1)*672.5m}
Rth3  t2      t3              {9.83+limit(Zthtype,0,1)*3.62}
Rth4  t3      t4              {1p+limit(Zthtype,0,1)*0}
Rth5  t4      Tcase           {1p+limit(Zthtype,0,1)*0}
Cth1  Tj      0               1.508u
Cth2  t1      0               2.286u
Cth3  t2      0               15.089u
Cth4  t3      0               1p
Cth5  t4      0               1p


.ENDS

*$

********************

.SUBCKT BSP296 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=1.1      Unn=10       Rmax=0.7
.PARAM act=2

X1  d1 g s Tj K_100_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {118.56m+limit(Zthtype,0,1)*43.88m}
Rth2  t1      t2              {347.23m+limit(Zthtype,0,1)*128.51m}
Rth3  t2      t3              {3.59+limit(Zthtype,0,1)*120.87m}
Rth4  t3      t4              {7.52+limit(Zthtype,0,1)*2.58}
Rth5  t4      Tcase           {7.85+limit(Zthtype,0,1)*2.7}
Cth1  Tj      0               36.815u
Cth2  t1      0               164.552u
Cth3  t2      0               417.212u
Cth4  t3      0               5.466m
Cth5  t4      0               48.845m


.ENDS
*$

********************

.SUBCKT BSS123 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.17     Unn=10       Rmax=6
.PARAM act=0.25

X1  d1 g s Tj K_100_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {626.01m+limit(Zthtype,0,1)*231.69m}
Rth2  t1      t2              {2.86+limit(Zthtype,0,1)*1.06}
Rth3  t2      t3              {6.1+limit(Zthtype,0,1)*1.02}
Rth4  t3      t4              {68.15+limit(Zthtype,0,1)*57.85}
Rth5  t4      Tcase           {79.56+limit(Zthtype,0,1)*67.54}
Cth1  Tj      0               4.89u
Cth2  t1      0               15.613u
Cth3  t2      0               132.666u
Cth4  t3      0               374.154u
Cth5  t4      0               4.696m


.ENDS
*$

********************

.SUBCKT BSP123 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.37     Unn=10       Rmax=6
.PARAM act=0.25

X1  d1 g s Tj K_100_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {626.01m+limit(Zthtype,0,1)*231.69m}
Rth2  t1      t2              {2.86+limit(Zthtype,0,1)*1.06}
Rth3  t2      t3              {4.57+limit(Zthtype,0,1)*1.02}
Rth4  t3      t4              {4.5+limit(Zthtype,0,1)*853.28m}
Rth5  t4      Tcase           {7.8+limit(Zthtype,0,1)*1.48}
Cth1  Tj      0               4.89u
Cth2  t1      0               15.613u
Cth3  t2      0               132.666u
Cth4  t3      0               5.466m
Cth5  t4      0               48.845m


.ENDS
*$

********************

.SUBCKT BSS119 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.17     Unn=10       Rmax=6
.PARAM act=0.25

X1  d1 g s Tj K_100_c_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {626.01m+limit(Zthtype,0,1)*231.69m}
Rth2  t1      t2              {2.86+limit(Zthtype,0,1)*1.06}
Rth3  t2      t3              {6.1+limit(Zthtype,0,1)*1.02}
Rth4  t3      t4              {68.15+limit(Zthtype,0,1)*57.85}
Rth5  t4      Tcase           {79.56+limit(Zthtype,0,1)*67.54}
Cth1  Tj      0               4.89u
Cth2  t1      0               15.613u
Cth3  t2      0               132.666u
Cth4  t3      0               374.154u
Cth5  t4      0               4.696m


.ENDS
*$

********************

.SUBCKT BSS169 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.05     Unn=0        Rmax=12
.PARAM act=0.25

X1  d1 g s Tj K_100_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {626.01m+limit(Zthtype,0,1)*231.69m}
Rth2  t1      t2              {2.86+limit(Zthtype,0,1)*1.06}
Rth3  t2      t3              {6.1+limit(Zthtype,0,1)*1.02}
Rth4  t3      t4              {68.15+limit(Zthtype,0,1)*57.85}
Rth5  t4      Tcase           {79.56+limit(Zthtype,0,1)*67.54}
Cth1  Tj      0               4.89u
Cth2  t1      0               15.613u
Cth3  t2      0               132.666u
Cth4  t3      0               374.154u
Cth5  t4      0               4.696m


.ENDS
*$

********************

.SUBCKT SISC0_5N10D drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.005     Rg=10        
.PARAM Inn=0.05     Unn=0        Rmax=12
.PARAM act=0.25

X1  drain g s Tj K_100_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



Rth1  Tj      t1              {626.01m+limit(Zthtype,0,1)*231.69m}
Rth2  t1      t2              {2.86+limit(Zthtype,0,1)*1.06}
Rth3  t2      t3              {3.57+limit(Zthtype,0,1)*1.02}
Rth4  t3      t4              {1p+limit(Zthtype,0,1)*0p}
Rth5  t4      Tcase           {1p+limit(Zthtype,0,1)*0p}
Cth1  Tj      0               4.89u
Cth2  t1      0               15.613u
Cth3  t2      0               132.666u
Cth4  t3      0               1p
Cth5  t4      0               1p


.ENDS
*$

********************

.SUBCKT BSP297 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.66     Unn=10       Rmax=1.8
.PARAM act=2

X1  d1 g s Tj K_200_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {118.56m+limit(Zthtype,0,1)*43.88m}
Rth2  t1      t2              {347.23m+limit(Zthtype,0,1)*128.51m}
Rth3  t2      t3              {3.59+limit(Zthtype,0,1)*120.87m}
Rth4  t3      t4              {7.52+limit(Zthtype,0,1)*2.58}
Rth5  t4      Tcase           {7.85+limit(Zthtype,0,1)*2.7}
Cth1  Tj      0               36.815u
Cth2  t1      0               164.552u
Cth3  t2      0               417.212u
Cth4  t3      0               5.466m
Cth5  t4      0               48.845m


.ENDS
*$

********************

.SUBCKT SISC3_2N20E drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.005     Rg=10        
.PARAM Inn=0.66     Unn=10       Rmax=1.8
.PARAM act=2

X1  drain g s Tj K_200_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



Rth1  Tj      t1              {118.56m+limit(Zthtype,0,1)*43.88m}
Rth2  t1      t2              {347.23m+limit(Zthtype,0,1)*128.51m}
Rth3  t2      t3              {465.31m+limit(Zthtype,0,1)*116.52m}
Rth4  t3      t4              {1p+limit(Zthtype,0,1)*0p}
Rth5  t4      Tcase           {1p+limit(Zthtype,0,1)*0p}
Cth1  Tj      0               36.815u
Cth2  t1      0               164.552u
Cth3  t2      0               650u
Cth4  t3      0               1p
Cth5  t4      0               1p


.ENDS
*$

********************

.SUBCKT BSP149 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.07     Unn=0        Rmax=3.5
.PARAM act=2

X1  d1 g s Tj K_200_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {118.56m+limit(Zthtype,0,1)*43.88m}
Rth2  t1      t2              {347.23m+limit(Zthtype,0,1)*128.51m}
Rth3  t2      t3              {3.59+limit(Zthtype,0,1)*120.87m}
Rth4  t3      t4              {7.52+limit(Zthtype,0,1)*2.58}
Rth5  t4      Tcase           {7.85+limit(Zthtype,0,1)*2.7}
Cth1  Tj      0               36.815u
Cth2  t1      0               164.552u
Cth3  t2      0               417.212u
Cth4  t3      0               5.466m
Cth5  t4      0               48.845m


.ENDS
*$

********************

.SUBCKT SISC3_2N20D drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        
.PARAM Inn=0.07     Unn=0        Rmax=3.5
.PARAM act=2

X1  drain g s Tj K_200_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



Rth1  Tj      t1              {118.56m+limit(Zthtype,0,1)*43.88m}
Rth2  t1      t2              {347.23m+limit(Zthtype,0,1)*128.51m}
Rth3  t2      t3              {465.31m+limit(Zthtype,0,1)*116.52m}
Rth4  t3      t4              {1p+limit(Zthtype,0,1)*0p}
Rth5  t4      Tcase           {1p+limit(Zthtype,0,1)*0p}
Cth1  Tj      0               36.815u
Cth2  t1      0               164.552u
Cth3  t2      0               650u
Cth4  t3      0               1p
Cth5  t4      0               1p


.ENDS
*$

********************

.SUBCKT BSS131 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.1      Unn=10       Rmax=14
.PARAM act=0.28

X1  d1 g s Tj K_240_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {624.77m+limit(Zthtype,0,1)*231.23m}
Rth2  t1      t2              {2.85+limit(Zthtype,0,1)*1.06}
Rth3  t2      t3              {5.96+limit(Zthtype,0,1)*781.17m}
Rth4  t3      t4              {68.15+limit(Zthtype,0,1)*58.03}
Rth5  t4      Tcase           {79.56+limit(Zthtype,0,1)*67.75}
Cth1  Tj      0               10.376u
Cth2  t1      0               17.965u
Cth3  t2      0               180.456u
Cth4  t3      0               374.154u
Cth5  t4      0               4.696m


.ENDS
*$

********************

.SUBCKT BSS87 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.082     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.26     Unn=10       Rmax=6
.PARAM act=0.54

X1  d1 g s Tj K_240_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {166.55m+limit(Zthtype,0,1)*61.64m}
Rth2  t1      t2              {730.55m+limit(Zthtype,0,1)*270.37m}
Rth3  t2      t3              {2.71+limit(Zthtype,0,1)*733.69m}
Rth4  t3      t4              {605m+limit(Zthtype,0,1)*2.11}
Rth5  t4      Tcase           {581m+limit(Zthtype,0,1)*2.03}
Cth1  Tj      0               13.4u
Cth2  t1      0               7.5u
Cth3  t2      0               43.4u
Cth4  t3      0               400u
Cth5  t4      0               600u
Cth6  Tcase   0               4m

.ENDS
*$

********************

.SUBCKT BSP89 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.35     Unn=10       Rmax=6
.PARAM act=0.54

X1  d1 g s Tj K_240_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {166.55m+limit(Zthtype,0,1)*61.64m}
Rth2  t1      t2              {730.55m+limit(Zthtype,0,1)*270.37m}
Rth3  t2      t3              {7.81+limit(Zthtype,0,1)*741.69m}
Rth4  t3      t4              {7.4+limit(Zthtype,0,1)*9.35m}
Rth5  t4      Tcase           {7.8+limit(Zthtype,0,1)*9.85m}
Cth1  Tj      0               13.4u
Cth2  t1      0               7.5u
Cth3  t2      0               149.668u
Cth4  t3      0               1.95m
Cth5  t4      0               48.845m


.ENDS
*$

********************

.SUBCKT BSP88 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.35     Unn=10       Rmax=6
.PARAM act=0.54

X1  d1 g s Tj K_240_c_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {166.55m+limit(Zthtype,0,1)*61.64m}
Rth2  t1      t2              {730.55m+limit(Zthtype,0,1)*270.37m}
Rth3  t2      t3              {7.81+limit(Zthtype,0,1)*741.69m}
Rth4  t3      t4              {7.4+limit(Zthtype,0,1)*9.35m}
Rth5  t4      Tcase           {7.8+limit(Zthtype,0,1)*9.85m}
Cth1  Tj      0               13.4u
Cth2  t1      0               7.5u
Cth3  t2      0               149.668u
Cth4  t3      0               1.95m
Cth5  t4      0               48.845m


.ENDS
*$

********************

.SUBCKT BSP129 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.025    Unn=0        Rmax=20
.PARAM act=0.54

X1  d1 g s Tj K_240_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {166.55m+limit(Zthtype,0,1)*61.64m}
Rth2  t1      t2              {730.55m+limit(Zthtype,0,1)*270.37m}
Rth3  t2      t3              {7.81+limit(Zthtype,0,1)*741.69m}
Rth4  t3      t4              {7.4+limit(Zthtype,0,1)*9.35m}
Rth5  t4      Tcase           {7.8+limit(Zthtype,0,1)*9.85m}
Cth1  Tj      0               13.4u
Cth2  t1      0               7.5u
Cth3  t2      0               149.668u
Cth4  t3      0               1.95m
Cth5  t4      0               48.845m


.ENDS
*$

********************

.SUBCKT SISC0_97N24D drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.005     Rg=10      
.PARAM Inn=0.025    Unn=0        Rmax=20
.PARAM act=0.54

X1  drain g s Tj K_240_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



Rth1  Tj      t1              {166.55m+limit(Zthtype,0,1)*61.64m}
Rth2  t1      t2              {730.55m+limit(Zthtype,0,1)*270.37m}
Rth3  t2      t3              {2+limit(Zthtype,0,1)*741.69m}
Rth4  t3      t4              {1p+limit(Zthtype,0,1)*0p}
Rth5  t4      Tcase           {1p+limit(Zthtype,0,1)*0p}
Cth1  Tj      0               13.4u
Cth2  t1      0               7.5u
Cth3  t2      0               149.668u
Cth4  t3      0               1p
Cth5  t4      0               1p


.ENDS

********************

.SUBCKT BSS139 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.015    Unn=0        Rmax=30
.PARAM act=0.28

X1  d1 g s Tj K_250_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {624.77m+limit(Zthtype,0,1)*231.23m}
Rth2  t1      t2              {2.85+limit(Zthtype,0,1)*1.06}
Rth3  t2      t3              {5.96+limit(Zthtype,0,1)*781.17m}
Rth4  t3      t4              {68.15+limit(Zthtype,0,1)*58.03}
Rth5  t4      Tcase           {79.56+limit(Zthtype,0,1)*67.75}
Cth1  Tj      0               10.376u
Cth2  t1      0               17.965u
Cth3  t2      0               180.456u
Cth4  t3      0               374.154u
Cth5  t4      0               4.696m


.ENDS
*$

********************

.SUBCKT BSP324 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.17     Unn=10       Rmax=25
.PARAM act=0.47

X1  d1 g s Tj K_400_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {685.56m+limit(Zthtype,0,1)*253.73m}
Rth2  t1      t2              {2.03+limit(Zthtype,0,1)*756.67m}
Rth3  t2      t3              {5.71+limit(Zthtype,0,1)*221.88m}
Rth4  t3      t4              {5.53+limit(Zthtype,0,1)*810.97m}
Rth5  t4      Tcase           {7.85+limit(Zthtype,0,1)*1.15}
Cth1  Tj      0               23.846u
Cth2  t1      0               48.38u
Cth3  t2      0               177.844u
Cth4  t3      0               1.642m
Cth5  t4      0               48.845m


.ENDS
*$

********************

.SUBCKT SISC1_4N40E drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.005     Rg=10        
.PARAM Inn=0.17     Unn=10       Rmax=25
.PARAM act=0.47

X1  drain g s Tj K_400_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



Rth1  Tj      t1              {685.56m+limit(Zthtype,0,1)*253.73m}
Rth2  t1      t2              {2.03+limit(Zthtype,0,1)*756.67m}
Rth3  t2      t3              {624.96m+limit(Zthtype,0,1)*222.92m}
Rth4  t3      t4              {1p+limit(Zthtype,0,1)*0}
Rth5  t4      Tcase           {1p+limit(Zthtype,0,1)*0}
Cth1  Tj      0               23.846u
Cth2  t1      0               48.38u
Cth3  t2      0               177.844u
Cth4  t3      0               1p
Cth5  t4      0               1p


.ENDS
*$

********************

.SUBCKT BSP125 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.12     Unn=10       Rmax=45
.PARAM act=0.47

X1  d1 g s Tj K_600_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {685.56m+limit(Zthtype,0,1)*253.73m}
Rth2  t1      t2              {2.03+limit(Zthtype,0,1)*756.67m}
Rth3  t2      t3              {5.71+limit(Zthtype,0,1)*221.88m}
Rth4  t3      t4              {5.53+limit(Zthtype,0,1)*810.97m}
Rth5  t4      Tcase           {7.85+limit(Zthtype,0,1)*1.15}
Cth1  Tj      0               23.846u
Cth2  t1      0               48.38u
Cth3  t2      0               177.844u
Cth4  t3      0               1p
Cth5  t4      0               1p


.ENDS
*$

********************

.SUBCKT BSS225 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.12     Unn=10       Rmax=45
.PARAM act=0.47

X1  d1 g s Tj K_600_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {166.55m+limit(Zthtype,0,1)*61.64m}
Rth2  t1      t2              {730.55m+limit(Zthtype,0,1)*270.37m}
Rth3  t2      t3              {2.8+limit(Zthtype,0,1)*892.38m}
Rth4  t3      t4              {605m+limit(Zthtype,0,1)*1.99}
Rth5  t4      Tcase           {581m+limit(Zthtype,0,1)*1.91}
Cth1  Tj      0               13.4u
Cth2  t1      0               7.5u
Cth3  t2      0               43.4u
Cth4  t3      0               400u
Cth5  t4      0               600u
Cth6  Tcase   0               4m

.ENDS

********************

.SUBCKT BSS127 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.016    Unn=10       Rmax=500
.PARAM act=0.04

X1  d1 g s Tj K_600_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {1.05+limit(Zthtype,0,1)*384.82m}
Rth2  t1      t2              {2.97+limit(Zthtype,0,1)*1.09}
Rth3  t2      t3              {14.08+limit(Zthtype,0,1)*12.96}
Rth4  t3      t4              {47.48+limit(Zthtype,0,1)*18.38}
Rth5  t4      Tcase           {30+limit(Zthtype,0,1)*11.61}
Cth1  Tj      0               3.5u
Cth2  t1      0               1.04u
Cth3  t2      0               1.95u
Cth4  t3      0               414u
Cth5  t4      0               6.75m


.ENDS

********************

.SUBCKT BSP135 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.01     Unn=0        Rmax=60
.PARAM act=0.47

X1  d1 g s Tj K_600_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {685.56m+limit(Zthtype,0,1)*253.73m}
Rth2  t1      t2              {2.03+limit(Zthtype,0,1)*756.67m}
Rth3  t2      t3              {5.71+limit(Zthtype,0,1)*221.88m}
Rth4  t3      t4              {5.53+limit(Zthtype,0,1)*810.97m}
Rth5  t4      Tcase           {7.85+limit(Zthtype,0,1)*1.15}
Cth1  Tj      0               44.039u
Cth2  t1      0               43.949u
Cth3  t2      0               360.599u
Cth4  t3      0               6.76m
Cth5  t4      0               103.014m


.ENDS
*$

********************

.SUBCKT SISC1_4N60D drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.005     Rg=10        
.PARAM Inn=0.01     Unn=0        Rmax=60
.PARAM act=0.47

X1  drain g s Tj K_600_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



Rth1  Tj      t1              {685.56m+limit(Zthtype,0,1)*253.73m}
Rth2  t1      t2              {2.03+limit(Zthtype,0,1)*756.67m}
Rth3  t2      t3              {624.96m+limit(Zthtype,0,1)*222.92m}
Rth4  t3      t4              {1p+limit(Zthtype,0,1)*0}
Rth5  t4      Tcase           {1p+limit(Zthtype,0,1)*0}
Cth1  Tj      0               23.846u
Cth2  t1      0               48.38u
Cth3  t2      0               177.844u
Cth4  t3      0               1p
Cth5  t4      0               1p


.ENDS
*$

********************

.SUBCKT BSS126 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0

.PARAM Rs=0.074     Rg=0.9       Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.003    Unn=0        Rmax=700
.PARAM act=0.04

X1  d1 g s Tj K_600_e_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=1

Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              {1.04+limit(Zthtype,0,1)*389.87m}
Rth2  t1      t2              {2.96+limit(Zthtype,0,1)*1.09}
Rth3  t2      t3              {14.09+limit(Zthtype,0,1)*12.96}
Rth4  t3      t4              {73.48+limit(Zthtype,0,1)*47.39}
Rth5  t4      Tcase           {80+limit(Zthtype,0,1)*51.6}
Cth1  Tj      0               3.529u
Cth2  t1      0               1.042u
Cth3  t2      0               1u
Cth4  t3      0               374u
Cth5  t4      0               4.7m


.ENDS
*$

****************************************************************************************************

.SUBCKT BSP92P drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=100m      Rg=65       Rd=230u      Ls=3n       Ld=1n        Lg=3n
.PARAM Inn=260m     Unn=10      Rmax=12      gmin=250m
.PARAM act=0.67

X1  d1 g s Tj K_250p_l_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}  
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=1
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              173m
Rth2  t1      t2              210m
Rth3  t2      t3              1.18
Rth4  t3      t4              9.13
Rth5  t4      Tcase           8.3
Cth1  Tj      0               25.3u
Cth2  t1      0               11.8u
Cth3  t2      0               37.4u
Cth4  t3      0               230u
Cth5  t4      0               9.5m

.ENDS
*$

**********

.SUBCKT BSP316P drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=50m       Rg=65       Rd=230u      Ls=3n       Ld=1n        Lg=3n
.PARAM Inn=720m     Unn=10      Rmax=1.8     gmin=550m
.PARAM act=0.83

X1  d1 g s Tj K_100p_l_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=1
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              55m
Rth2  t1      t2              306m
Rth3  t2      t3              2.78
Rth4  t3      t4              7.8
Rth5  t4      Tcase           7.1
Cth1  Tj      0               16.7u
Cth2  t1      0               16.9u
Cth3  t2      0               93.2u
Cth4  t3      0               447u
Cth5  t4      0               14.8m

.ENDS
*$

**********

.SUBCKT BSR316P drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=50m       Rg=65       Rd=230u      Ls=3n       Ld=1n        Lg=3n
.PARAM Inn=720m     Unn=10      Rmax=1.8     gmin=550m
.PARAM act=0.83

X1  d1 g s Tj K_100p_l_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=1
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              40m
Rth2  t1      t2              377m
Rth3  t2      t3              2.13
Rth4  t3      t4              43
Rth5  t4      Tcase           30
Cth1  Tj      0               11.6u
Cth2  t1      0               30.2u
Cth3  t2      0               122.1u
Cth4  t3      0               1.17m
Cth5  t4      0               9.19m

.ENDS
*$

**********

.SUBCKT BSP317P drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=120m      Rg=105       Rd=230u      Ls=3n       Ld=1n        Lg=3n
.PARAM Inn=430m     Unn=10       Rmax=4.4     gmin=540m
.PARAM act=1.83

X1  d1 g s Tj K_250p_l_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}  
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=1
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              64m
Rth2  t1      t2              78m
Rth3  t2      t3              1.28
Rth4  t3      t4              4.26
Rth5  t4      Tcase           6.55
Cth1  Tj      0               69u
Cth2  t1      0               32u
Cth3  t2      0               237u
Cth4  t3      0               732u
Cth5  t4      0               14.8m

.ENDS
*$


**********

.SUBCKT BSS192P drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=80m       Rg=65       Rd=350u      Ls=3n       Ld=1n        Lg=3n
.PARAM Inn=190m     Unn=10      Rmax=12      gmin=200m
.PARAM act=0.67

X1  d1 g s Tj K_250p_l_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=1
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              106m
Rth2  t1      t2              433m
Rth3  t2      t3              1.72
Rth4  t3      t4              234m
Rth5  t4      Tcase           727m
Cth1  Tj      0               24.2u
Cth2  t1      0               15u
Cth3  t2      0               79u
Cth4  t3      0               681u
Cth5  t4      0               500u

.ENDS
*$


**********

.SUBCKT SPP15P10P drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=3.5m      Rg=4.6       Rd=350u      Ls=5n       Ld=1n        Lg=7n
.PARAM Inn=10.7     Unn=10       Rmax=230m    gmin=6
.PARAM act=7.68

X1  d1 g s Tj K_100p_n_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}  
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=1
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

Rth1  Tj      t1              5.12m
Rth2  t1      t2              46m
Rth3  t2      t3              211m
Rth4  t3      t4              231m
Rth5  t4      Tcase           312m
Cth1  Tj      0               160u
Cth2  t1      0               193u
Cth3  t2      0               2.42m
Cth4  t3      0               1.3m
Cth5  t4      0               61m
Cth6  Tcase   0               210m
 
.ENDS

*$

********************

.SUBCKT BSS138N_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.23     Unn=10       Rmax=3.5
.PARAM act=0.13

X1  d1 g s Tj K_60_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SISC0_3N06E1_0_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.005     Rg=25
.PARAM Inn=0.23     Unn=10       Rmax=3.5
.PARAM act=0.13

X1  drain g s Tj K_60_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS

**********

.SUBCKT BSS138W_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.054     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.2      Unn=10       Rmax=3.5
.PARAM act=0.13

X1  d1 g s Tj K_60_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SN7002N_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.5      Unn=10       Rmax=5
.PARAM act=0.13

X1  d1 g s Tj K_60_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SISC0_3N06E1_4_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.005     Rg=25
.PARAM Inn=0.5      Unn=10       Rmax=5
.PARAM act=0.13

X1  drain g s Tj K_60_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS

**********

.SUBCKT SN7002W_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.054     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.16     Unn=10       Rmax=5
.PARAM act=0.13

X1  d1 g s Tj K_60_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSS7728N_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.5      Unn=10       Rmax=7.5
.PARAM act=0.13

X1  d1 g s Tj K_60_c_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSS159N_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=25        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.07     Unn=0        Rmax=8
.PARAM act=0.13

X1  d1 g s Tj K_60_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SISC0_3N06D_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.005     Rg=10        
.PARAM Inn=0.07     Unn=0        Rmax=8
.PARAM act=0.13

X1  drain g s Tj K_60_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP296_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=1.1      Unn=10       Rmax=0.7
.PARAM act=2

X1  d1 g s Tj K_100_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSS123_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.17     Unn=10       Rmax=6
.PARAM act=0.25

X1  d1 g s Tj K_100_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP123_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.37     Unn=10       Rmax=6
.PARAM act=0.25

X1  d1 g s Tj K_100_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSS119_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.17     Unn=10       Rmax=6
.PARAM act=0.25

X1  d1 g s Tj K_100_c_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSS169_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.05     Unn=0        Rmax=12
.PARAM act=0.25

X1  d1 g s Tj K_100_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SISC0_5N10D_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.005     Rg=10        
.PARAM Inn=0.05     Unn=0        Rmax=12
.PARAM act=0.25

X1  drain g s Tj K_100_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP297_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.66     Unn=10       Rmax=1.8
.PARAM act=2

X1  d1 g s Tj K_200_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SISC3_2N20E_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.005     Rg=10        
.PARAM Inn=0.66     Unn=10       Rmax=1.8
.PARAM act=2

X1  drain g s Tj K_200_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP149_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.07     Unn=0        Rmax=3.5
.PARAM act=2

X1  d1 g s Tj K_200_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SISC3_2N20D_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        
.PARAM Inn=0.07     Unn=0        Rmax=3.5
.PARAM act=2

X1  drain g s Tj K_200_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSS131_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.1      Unn=10       Rmax=14
.PARAM act=0.28

X1  d1 g s Tj K_240_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********
.SUBCKT BSS87_L0 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.082     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.26     Unn=10       Rmax=6
.PARAM act=0.54

X1  d1 g s Tj K_240_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSS87_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.082     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.26     Unn=10       Rmax=6
.PARAM act=0.54

X1  d1 g s Tj K_240_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP89_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.35     Unn=10       Rmax=6
.PARAM act=0.54

X1  d1 g s Tj K_240_b_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP88_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.35     Unn=10       Rmax=6
.PARAM act=0.54

X1  d1 g s Tj K_240_c_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP129_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.025    Unn=0        Rmax=20
.PARAM act=0.54

X1  d1 g s Tj K_240_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SISC0_97N24D_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.005     Rg=10
.PARAM Inn=0.025    Unn=0        Rmax=20
.PARAM act=0.54

X1  drain g s Tj K_240_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS

**********

.SUBCKT BSS139_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.015    Unn=0        Rmax=30
.PARAM act=0.28

X1  d1 g s Tj K_250_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP324_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.17     Unn=10       Rmax=25
.PARAM act=0.47

X1  d1 g s Tj K_400_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SISC1_4N40E_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.005     Rg=10        
.PARAM Inn=0.17     Unn=10       Rmax=25
.PARAM act=0.47

X1  drain g s Tj K_400_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP125_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.12     Unn=10       Rmax=45
.PARAM act=0.47

X1  d1 g s Tj K_600_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSS225_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.12     Unn=10       Rmax=45
.PARAM act=0.47

X1  d1 g s Tj K_600_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS

**********

.SUBCKT BSS127_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.016    Unn=10       Rmax=500
.PARAM act=0.04

X1  d1 g s Tj K_600_a_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS

**********

.SUBCKT BSP135_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.027     Rg=10        Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.01     Unn=0        Rmax=60
.PARAM act=0.47

X1  d1 g s Tj K_600_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SISC1_4N60D_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.005     Rg=10        
.PARAM Inn=0.01     Unn=0        Rmax=60
.PARAM act=0.47

X1  drain g s Tj K_600_d_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    gate     g    {Rg}   

Gs    source     s    VALUE={V(source,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   source     s    1Meg



E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSS126_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0

.PARAM Rs=0.074     Rg=0.9       Ls=3n        Ld=1n        Lg=3n
.PARAM Inn=0.003    Unn=0        Rmax=700
.PARAM act=0.04

X1  d1 g s Tj K_600_e_var PARAMS: a={act} dVth={dVth} dR={dRdson} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} dgfs={dgfs} Rs={Rs} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Ld    drain  d1   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS

**********


*$


****************************************************************************************************

.SUBCKT BSP92P_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 

.PARAM Rs=100m      Rg=65       Rd=230u      Ls=3n       Ld=1n        Lg=3n
.PARAM Inn=260m     Unn=10      Rmax=12      gmin=250m
.PARAM act=0.67

X1  d1 g s Tj K_250p_l_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSS192P_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 

.PARAM Rs=80m       Rg=65       Rd=350u      Ls=3n       Ld=1n        Lg=3n
.PARAM Inn=190m     Unn=10      Rmax=12      gmin=200m
.PARAM act=0.67

X1  d1 g s Tj K_250p_l_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP316P_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 

.PARAM Rs=50m       Rg=65       Rd=230u      Ls=3n       Ld=1n        Lg=3n
.PARAM Inn=720m     Unn=10      Rmax=1.8     gmin=550m
.PARAM act=0.83

X1  d1 g s Tj K_100p_l_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSR316P_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 

.PARAM Rs=50m       Rg=65       Rd=230u      Ls=3n       Ld=1n        Lg=3n
.PARAM Inn=720m     Unn=10      Rmax=1.8     gmin=550m
.PARAM act=0.83

X1  d1 g s Tj K_100p_l_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT BSP317P_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 

.PARAM Rs=120m      Rg=105       Rd=230u      Ls=3n       Ld=1n        Lg=3n
.PARAM Inn=430m     Unn=10       Rmax=4.4     gmin=540m
.PARAM act=1.83

X1  d1 g s Tj K_250p_l_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS
*$

**********

.SUBCKT SPP15P10P_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 

.PARAM Rs=3.5m      Rg=4.6       Rd=350u      Ls=5n       Ld=1n        Lg=7n
.PARAM Inn=10.7     Unn=10       Rmax=230m    gmin=6
.PARAM act=7.68

X1  d1 g s Tj K_100p_n_var PARAMS: a={act} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn} 
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} heat=0
Rg    g1     g    {Rg}   
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m))}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w      VALUE={TEMP}
R1    w      0      1u

.ENDS

*$


*****************************************************************************************




*$
.SUBCKT BSO302SN_L1 drain gate source 

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1  c=0.85  
.PARAM Vth=2.6  Rs=0.004  Rd=0.001  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.054312  Cox=2.78910067090909E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=60320191.9384616  
.PARAM g13=77098.7147183496  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-26.4678703061229  g17=1.73577861576469E-09  al=0.6  Fm=0.03
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*max(Uds,0)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 1.24n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
.ENDS
*$



.SUBCKT BSO304SN_L1 drain gate source 

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.006  Rd=0.0055  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.7883408  Cox=1.07031893563636E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=23147831.6676923  
.PARAM g13=77098.4889870177  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.4256342862036  g17=6.66103835529768E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*max(Uds,0)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.2
Cgs g s 475p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
.ENDS
*$


.SUBCKT BSO305N_L1 drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.008  Rd=0.00525  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.8088496  Cox=1.09824721854545E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=23750025.8584615  
.PARAM g13=77093.2149097062  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.3999093949652  g17=6.83432623209047E-10  al=0.6  Fm=0.03
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*max(Uds,0)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 487p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u

G_G2 d2 s2 VALUE={li1(V(d2,s2),V(g2,s2))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2)),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 487p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
.ENDS
*$



.SUBCKT BSO307N_L1 drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.009  Rd=0.0075  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.475072  Cox=6.44966116363636E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=13949407.0153846  
.PARAM g13=77101.9498901508  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.9321262087125  g17=4.01409239954088E-10  al=0.6  Fm=0.03
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*max(Uds,0)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 487p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u

G_G2 d2 s2 VALUE={li1(V(d2,s2),V(g2,s2))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2)),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 487p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
.ENDS
*$



.SUBCKT BSO615N_L1 drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a

.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u

G_G2 d2 s2 VALUE={li1(V(d2,s2),V(g2,s2))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2)),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 256p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
.ENDS
*$




.SUBCKT BSP308_L1 drain gate source 

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.009  Rd=0.0075  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.475072  Cox=6.44966116363636E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=13949407.0153846  
.PARAM g13=77101.9498901508  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.9321262087125  g17=4.01409239954088E-10  al=0.6  Fm=0.03    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 286p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
.ENDS
*$


.SUBCKT BSP318S_L1 drain gate source 

.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.6  Rs=0.012  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 256p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 5n
LS so1 source 2n
.ENDS
*$


.SUBCKT BSO615NV_L1 drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a

.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u

G_G2 d2 s2 VALUE={li1(V(d2,s2),V(g2,s2))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2)),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 241p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
.ENDS
*$


.SUBCKT BSP320S_L1 drain gate source 

.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
.ENDS
*$


.SUBCKT BSO302SN drain gate source Tj Tsolder_joint 

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1  c=0.85  
.PARAM Vth=2.6  Rs=0.004  Rd=0.001  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.054312  Cox=2.78910067090909E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=60320191.9384616  
.PARAM g13=77098.7147183496  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-26.4678703061229  g17=1.73577861576469E-09  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 1.24n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
G_TH 0 Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj 0 54.8u
C_TH2 Tj2 0 70.2u
C_TH3 Tj3 0 2.43m
C_TH4 Tj4 0 9.42m
C_TH5 Tj5 0 69.5m
R_TH1 Tj Tj2 2.7m
R_TH2 Tj2 Tj3 53.5m
R_TH3 Tj3 Tj4 846m
R_TH4 Tj4 Tj5 7.73
R_TH5 Tj5 Tsolder_joint 12.8
.ENDS
*$



.SUBCKT BSO304SN drain gate source Tj Tsolder_joint

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.006  Rd=0.0055  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.7883408  Cox=1.07031893563636E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=23147831.6676923  
.PARAM g13=77098.4889870177  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.4256342862036  g17=6.66103835529768E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 475p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
G_TH 0 Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj 0 21u
C_TH2 Tj2 0 27.6u
C_TH3 Tj3 0 1.02m
C_TH4 Tj4 0 8.1m
C_TH5 Tj5 0 148m
R_TH1 Tj Tj2 7.1m
R_TH2 Tj2 Tj3 144m
R_TH3 Tj3 Tj4 2.4
R_TH4 Tj4 Tj5 10.4
R_TH5 Tj5 Tsolder_joint 10.6
.ENDS
*$


.SUBCKT BSO305N drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.008  Rd=0.00525  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.8088496  Cox=1.09824721854545E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=23750025.8584615  
.PARAM g13=77093.2149097062  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.3999093949652  g17=6.83432623209047E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 487p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u

G_G2 d2 s2 VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 487p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u

G_TH1 0 Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH11 Tj1 0 21.2u
C_TH12 Tj12 0 27.2u
C_TH13 Tj13 0 950u
C_TH14 Tj14 0 4.64u
C_TH15 Tj15 0 38.6m
R_TH11 Tj1 Tj12 6.94m
R_TH12 Tj12 Tj13 138.3m
R_TH13 Tj13 Tj14 1.84
R_TH14 Tj14 Tj15 18.9
R_TH15 Tj15 Tsolder_joint1 22
G_TH2 0 Tj2 VALUE = {LIMIT(V(dr2,so2)*V(s,so2)/Rs,0,100k)}
C_TH21 Tj2 0 21.2u
C_TH22 Tj22 0 27.2u
C_TH23 Tj23 0 950u
C_TH24 Tj24 0 4.64m
C_TH25 Tj25 0 38.6m
R_TH21 Tj2 Tj22 6.94m
R_TH22 Tj22 Tj23 138.3m
R_TH23 Tj23 Tj24 1.84
R_TH24 Tj24 Tj25 18.9
R_TH25 Tj25 Tsolder_joint2 22
Ck1 Tcoup 0 3m
Rk1 Tj14 Tcoup 114
Rk2 Tj24 Tcoup 114
.ENDS
*$




.SUBCKT BSO307N drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.009  Rd=0.0075  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.475072  Cox=6.44966116363636E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=13949407.0153846  
.PARAM g13=77101.9498901508  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.9321262087125  g17=4.01409239954088E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 286p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u

G_G2 d2 s2 VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 486p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u

G_TH1 0 Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH11 Tj1 0 12.6u
C_TH12 Tj12 0 16.4u
C_TH13 Tj13 0 598u
C_TH14 Tj14 0 3.91m
C_TH15 Tj15 0 38.6m
R_TH11 Tj1 Tj12 12.06m
R_TH12 Tj12 Tj13 254m
R_TH13 Tj13 Tj14 4.05
R_TH14 Tj14 Tj15 19.67
R_TH15 Tj15 Tsolder_joint1 22
G_TH2 0 Tj2 VALUE = {LIMIT(V(dr2,so2)*V(s2,so2)/Rs,0,100k)}
C_TH21 Tj2 0 12.6u
C_TH22 Tj22 0 16.4u
C_TH23 Tj23 0 598u
C_TH24 Tj24 0 3.91m
C_TH25 Tj25 0 38.6m
R_TH21 Tj2 Tj22 12.06m
R_TH22 Tj22 Tj23 254m
R_TH23 Tj23 Tj24 4.05
R_TH24 Tj24 Tj25 19.67
R_TH25 Tj25 Tsolder_joint2 22
Ck1 Tcoup 0 3m
Rk1 Tj14 Tcoup 123
Rk2 Tj24 Tcoup 123
.ENDS
*$



.SUBCKT BSO615N drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 

.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u

G_G2 d2 s2 VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 256p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u

G_TH1 0 Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH11 Tj1 0 16.1u
C_TH12 Tj12 0 15.2u
C_TH13 Tj13 0 524u
C_TH14 Tj14 0 3.95m
C_TH15 Tj15 0 39.5m
R_TH11 Tj1 Tj12 18.6m
R_TH12 Tj12 Tj13 280m
R_TH13 Tj13 Tj14 3.22
R_TH14 Tj14 Tj15 21.1
R_TH15 Tj15 Tsolder_joint1 22
G_TH2 0 Tj2 VALUE = {LIMIT(V(dr2,so2)*V(s2,so2)/Rs,0,100k)}
C_TH21 Tj2 0 16.1u
C_TH22 Tj22 0 15.2u
C_TH23 Tj23 0 524u
C_TH24 Tj24 0 3.95m
C_TH25 Tj25 0 39.5m
R_TH21 Tj2 Tj22 18.6m
R_TH22 Tj22 Tj23 280m
R_TH23 Tj23 Tj24 3.22
R_TH24 Tj24 Tj25 21.1
R_TH25 Tj25 Tsolder_joint2 22
Ck1 Tcoup 0 3m
Rk1 Tj14 Tcoup 125
Rk2 Tj24 Tcoup 125
.ENDS
*$




.SUBCKT BSP308 drain gate source Tj Tsolder_joint 

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.009  Rd=0.0075  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.475072  Cox=6.44966116363636E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=13949407.0153846  
.PARAM g13=77101.9498901508  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.9321262087125  g17=4.01409239954088E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 286p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
G_TH 0 Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj 0 12.5u
C_TH2 Tj2 0 15.5u
C_TH3 Tj3 0 439u
C_TH4 Tj4 0 8.17m
C_TH5 Tj5 0 14.9m
R_TH1 Tj Tj2 10.5m
R_TH2 Tj2 Tj3 212m
R_TH3 Tj3 Tj4 1.04
R_TH4 Tj4 Tj5 4.09
R_TH5 Tj5 Tsolder_joint 7.51
.ENDS
*$



.SUBCKT BSP318S drain gate source Tj Tsolder_joint

.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.012  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
G_TH 0 Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj 0 17.6u
C_TH2 Tj2 0 16.9u
C_TH3 Tj3 0 599u
C_TH4 Tj4 0 6.34m
C_TH5 Tj5 0 400m
R_TH1 Tj Tj2 17.2m
R_TH2 Tj2 Tj3 260m
R_TH3 Tj3 Tj4 3.57
R_TH4 Tj4 Tj5 7.4
R_TH5 Tj5 Tsolder_joint 2.41
.ENDS
*$



.SUBCKT BSO615NV drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2

.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u

G_G2 d2 s2 VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 241p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u

G_TH1 0 Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH11 Tj1 0 16.1u
C_TH12 Tj12 0 15.2u
C_TH13 Tj13 0 524u
C_TH14 Tj14 0 3.95m
C_TH15 Tj15 0 39.5m
R_TH11 Tj1 Tj12 18.6m
R_TH12 Tj12 Tj13 280m
R_TH13 Tj13 Tj14 3.22
R_TH14 Tj14 Tj15 21.1
R_TH15 Tj15 Tsolder_joint1 22
G_TH2 0 Tj2 VALUE = {LIMIT(V(dr2,so2)*V(s2,so2)/Rs,0,100k)}
C_TH21 Tj2 0 16.1u
C_TH22 Tj22 0 15.2u
C_TH23 Tj23 0 524u
C_TH24 Tj24 0 3.95m
C_TH25 Tj25 0 39.5m
R_TH21 Tj2 Tj22 18.6m
R_TH22 Tj22 Tj23 280m
R_TH23 Tj23 Tj24 3.22
R_TH24 Tj24 Tj25 21.1
R_TH25 Tj25 Tsolder_joint2 22
Ck1 Tcoup 0 3m
Rk1 Tj14 Tcoup 125
Rk2 Tj24 Tcoup 125
.ENDS
*$



.SUBCKT BSP320S drain gate source Tj Tsolder_joint

.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
G_TH 0 Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj 0 17.6u
C_TH2 Tj2 0 16.9u
C_TH3 Tj3 0 599u
C_TH4 Tj4 0 6.34m
C_TH5 Tj5 0 400m
R_TH1 Tj Tj2 17.2m
R_TH2 Tj2 Tj3 260m
R_TH3 Tj3 Tj4 3.57
R_TH4 Tj4 Tj5 7.4
R_TH5 Tj5 Tsolder_joint 2.41
.ENDS
*$

.SUBCKT BSO315C_L1 drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.45  Rs=0.019  Rd=0.013  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.2246816  Cox=3.05067416727273E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=6597263.33538462  
.PARAM g13=77093.8548710156  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-28.6808432404272  g17=1.89843371715589E-10  al=0.6  Fm=0.03    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*max(Uds,0)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

.PARAM Lp=0.0000007  g2p=0.0232  vmp=330000  thetap=0.07  kappap=1.4  cp=0.85  
.PARAM Vthp=2.65  Rsp=0.012  Rdp=0.00475  Tp=300  Trefp=273  authp=0.0025  aubrp=0.027  
.PARAM Ibrp=0.0000000001  Ubrp=31.7  k1p=0.5  k2p=1.5  Acfgs2p=1  Acfdgp=1.45  
.PARAM coxip=6.27545454545454E-04  Epp=14224137.9310345  psip=0.336375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.35186  Coxp=2.72229218181818E-10  
.PARAM h2p=3.23578125E-14  Fnp=6.4715625E-14  Vnp=0.420686657974794  g10p=1339960  
.PARAM g13p=87482.1570409299  g14p=15625  g15p=-0.917264038295183  g16p=-28.8308359101058  
.PARAM g17p=3.66217261878034E-10  alp=0.6  Fmp=0.2    
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.PARAM h1p={Lp*vmp/(g2p*(Trefp/(Trefp+TEMP))**1.5)}
.PARAM h4p={g10p*(Trefp/(Trefp+TEMP))**1.5}
.PARAM Isp={exp(min(g16p+((TEMP+Trefp)/Tp-1)*(1.12/(Unp*(TEMP+Trefp))),23))*((TEMP+Trefp)/Tp)**3}
.FUNC  Uep(Uds,Ugs)  {Ugs-Vthp+authp*(TEMP+Trefp-Tp)+Fmp*SQRT(max(Uds,0))}
.FUNC  Udssatp(Uds,Ugs)  {-h1p+SQRT(max(h1p**2+MAX(psip,Uep(Uds,Ugs))*h1p/cp,0))}
.FUNC  Lshortp(Uds,Ugs))  {if(Uds>Udssatp(Uds,Ugs),Lp-((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs)  {Wp/(Lshortp(Uds,Ugs)*((1+thetap*Uep(Uds,Ugs))*(1/(g2p*(Trefp/(Trefp+TEMP))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs)  {min(Udssatp(Uds,Ugs),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs)  {(psip*enp(Uds,Ugs)-cp*enp(Uds,Ugs)**2)*exp(min(h7p(Uep(Uds,Ugs))/psip-1,23))}
.FUNC  I2p(Uds,Ugs)  {if(Uds>0,(Uep(Uds,Ugs)-cp*enp(Uds,Ugs))*enp(Uds,Ugs),0)}
.FUNC  h3p(Uds,Ugs)  {(3-2*(Uep(Uds,Ugs)/psip-k1p))*((Uep(Uds,Ugs)/psip-k1p))**2}
.FUNC  blep(Uds,Ugs) {h3p(Uds,Ugs)*I2p(Uds,Ugs)+(1-h3p(Uds,Ugs))*I1p(Uds,Ugs)}
.FUNC  I3p(Uds,Ugs)  {if(Uep(Uds,Ugs)/psip<k2p,if(Uep(Uds,Ugs)/psip<k1p,I1p(Uds,Ugs),blep(Uds,Ugs)),I2p(Uds,Ugs))}
.FUNC  Igp(Uds,Ugs) {betap(Uds,Ugs)*I3p(Uds,Ugs)}
.FUNC  Irdp(Usd)  {-Isp+exp(min(log(Isp)+Usd/(Unp*(TEMP+Trefp)),23))}
.FUNC  Idbrp(Uds)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(TEMP+Trefp-Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-1)/2/alp,Ugs)+Idbrp(Uds)-Irdp(-Uds),-Igp(-Uds,Ugs)-Irdp(-Uds))}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x)  {if(x<0,Rdiodp(-x),g13p)/h4p}
.FUNC  Rdrp(x)  {RSip(x)+(Rdp+Rsp)*(1+0.0039*(TEMP+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x) {30n*Irdp(-x)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x) {Cdiffp(h6p(x))+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs)  {SL(Igesp(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.0
Cgs g s 135p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u

G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp))-if(Time>100p,SL(DDT(V(sp,dp))*Cds(V(sp,dp)),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 69
Cgsp gp sp 171p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
.ENDS

.SUBCKT BSO315C drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 

.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.45  Rs=0.019  Rd=0.013  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.2246816  Cox=3.05067416727273E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  g10=6597263.33538462  
.PARAM g13=77093.8548710156  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-28.6808432404272  g17=1.89843371715589E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

.PARAM Lp=0.0000007  g2p=0.0232  vmp=330000  thetap=0.07  kappap=1.4  cp=0.85  
.PARAM Vthp=2.65  Rsp=0.012  Rdp=0.00475  Tp=300  Trefp=273  authp=0.0025  aubrp=0.027  
.PARAM Ibrp=0.0000000001  Ubrp=31.7  k1p=0.5  k2p=1.5  Acfgs2p=1  Acfdgp=1.45  
.PARAM coxip=6.27545454545454E-04  Epp=14224137.9310345  psip=0.336375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.35186  Coxp=2.72229218181818E-10  
.PARAM h2p=3.23578125E-14  Fnp=6.4715625E-14  Vnp=0.420686657974794  g10p=1339960  
.PARAM g13p=87482.1570409299  g14p=15625  g15p=-0.917264038295183  g16p=-28.8308359101058  
.PARAM g17p=3.66217261878034E-10  alp=0.6  Fmp=0.2 
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.FUNC  Uep(Uds,Ugs,Tj)  {Ugs-Vthp+authp*(Tj+Trefp-Tp)+Fmp*SQRT(max(Uds,0))}
.FUNC  h1p(Tj) {Lp*vmp/(g2p*(Trefp/(Trefp+Tj))**1.5)}
.FUNC  Udssatp(Uds,Ugs,Tj)  {-h1p(Tj)+SQRT(max(h1p(Tj)**2+MAX(psip,Uep(Uds,Ugs,Tj))*h1p(Tj)/cp,0))}
.FUNC  Lsp(Uds,Ugs,Tj))  {if(Uds>Udssatp(Uds,Ugs,Tj),Lp-((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs,Tj)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs,Tj)  {Wp/(Lsp(Uds,Ugs,Tj)*((1+thetap*Uep(Uds,Ugs,Tj))*(1/(g2p*(Trefp/(Trefp+Tj))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs,Tj)  {min(Udssatp(Uds,Ugs,Tj),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs,Tj)  {(psip*enp(Uds,Ugs,Tj)-cp*enp(Uds,Ugs,Tj)**2)*exp(min(h7p(Uep(Uds,Ugs,Tj))/psip-1,23))}
.FUNC  I2p(Uds,Ugs,Tj)  {if(Uds>0,(Uep(Uds,Ugs,Tj)-cp*enp(Uds,Ugs,Tj))*enp(Uds,Ugs,Tj),0)}
.FUNC  h3p(Uds,Ugs,Tj)  {(3-2*(Uep(Uds,Ugs,Tj)/psip-k1p))*((Uep(Uds,Ugs,Tj)/psip-k1p))**2}
.FUNC  bp(Uds,Ugs,Tj) {h3p(Uds,Ugs,Tj)*I2p(Uds,Ugs,Tj)+(1-h3p(Uds,Ugs,Tj))*I1p(Uds,Ugs,Tj)}
.FUNC  I3p(Uds,Ugs,Tj)  {if(Uep(Uds,Ugs,Tj)/psip<k2p,if(Uep(Uds,Ugs,Tj)/psip<k1p,I1p(Uds,Ugs,Tj),bp(Uds,Ugs,Tj)),I2p(Uds,Ugs,Tj))}
.FUNC  Igp(Uds,Ugs,Tj) {betap(Uds,Ugs,Tj)*I3p(Uds,Ugs,Tj)}
.FUNC  Isp(Tj) {exp(min(g16p+((Tj+Trefp)/Tp-1)*(1.12/(Unp*(Tj+Trefp))),23))*((Tj+Trefp)/Tp)**3}
.FUNC  Irdp(Usd,Tj)  {-Isp(Tj)+exp(min(log(Isp(Tj))+Usd/(Unp*(Tj+Trefp)),23))}
.FUNC  Idbp(Uds,Tj)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(Tj+Trefp-Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs,Tj) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-1)/2/alp,Ugs,Tj)+Idbp(Uds,Tj),-Igp(-Uds,Ugs,Tj))-Irdp(-Uds,Tj)}
.FUNC  h4p(Tj)  {g10p*(Trefp/(Trefp+Tj))**1.5}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x,Tj)  {if(x<0,Rdiodp(-x),g13p)/h4p(Tj)}
.FUNC  Rdrp(x,Tj)  {RSip(x,Tj)+(Rdp+Rsp)*(1+0.0039*(Tj+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x,Tj) {30n*Irdp(-x,Tj)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x,Tj) {Cdiffp(h6p(x),Tj)+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs,Tj)  {SL(Igesp(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 10
Cgs g s 135p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u

G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp),lm(V(Tj2)))-if(Time>100p,SL(DDT(V(sp,dp))*Cds(V(sp,dp),lm(V(Tj2))),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp),lm(V(Tj2)))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 69
Cgsp gp sp 171p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u

G_TH1 0 Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
G_TH2 0 Tj2 VALUE = {LIMIT(V(dr1p,so1p)*V(sp,so1p)/Rsp,0,100k)}
C11 Tj1 0 5.97u
C12 T12 0 7.91u
C13 T13 0 326u
C14 T14 0 3.52m
C15 T15 0 39.4m
C21 Tj2 0 8.22u
C22 T22 0 11u
C23 T23 0 246u
C24 T24 0 3.97m
C25 T25 0 47.46m
Ck T3 0 3m
R11 Tj1 T12 24.8m
R12 T12 T13 514m
R13 T13 T14 5.92
R14 T14 T15 22.3
R15 T15 Tsolder_joint1 23
R21 Tj2 T22 18.1m
R22 T22 T23 370m
R23 T23 T24 5.18
R24 T24 T25 20.2
R25 T25 Tsolder_joint2 23
Rk1 T14 T3 132
Rk2 T24 T3 132
.ENDS

.SUBCKT BSO615C_L1 drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a

.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}

.PARAM Lp=0.000001  g2p=0.0232  vmp=330000  thetap=0.07  kappap=1.4  cp=0.85  
.PARAM Vthp=1.92  Rsp=0.007  Rdp=0.00075  Tp=300  Trefp=273  authp=0.0025  aubrp=0.061  
.PARAM Ibrp=0.0000000001  Ubrp=69.4  k1p=0.5  k2p=1.5  Acfgs2p=1.25  Acfdgp=0.7  
.PARAM coxip=6.27545454545454E-04  Epp=14224137.9310345  psip=0.2199375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.451108  Coxp=8.08840826181818E-10  
.PARAM h2p=3.23578125E-14  Fnp=9.95625E-14  Vnp=0.273446327683616  g10p=591209.256  
.PARAM g13p=85459.4252233038  g14p=11160.7142857143  g15p=-0.739521909998096  
.PARAM g16p=-27.7057446621245  g17p=2.9588579141072E-10  alp=0.6    
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.PARAM h1p={Lp*vmp/(g2p*(Trefp/(Trefp+TEMP))**1.5)}
.PARAM h4p={g10p*(Trefp/(Trefp+TEMP))**1.5}
.PARAM Isp={exp(min(g16p+((TEMP+Trefp)/Tp-1)*(1.12/(Unp*(TEMP+Trefp))),23))*((TEMP+Trefp)/Tp)**3}
.FUNC  Uep(Uds,Ugs)  {Ugs-Vthp+authp*(TEMP+Trefp-Tp)}
.FUNC  Udssatp(Uds,Ugs)  {-h1p+SQRT(max(h1p**2+MAX(psip,Uep(Uds,Ugs))*h1p/cp,0))}
.FUNC  Lshortp(Uds,Ugs))  {if(Uds>Udssatp(Uds,Ugs),Lp-((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs)  {Wp/(Lshortp(Uds,Ugs)*((1+thetap*Uep(Uds,Ugs))*(1/(g2p*(Trefp/(Trefp+TEMP))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs)  {min(Udssatp(Uds,Ugs),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs)  {(psip*enp(Uds,Ugs)-cp*enp(Uds,Ugs)**2)*exp(min(h7p(Uep(Uds,Ugs))/psip-1,23))}
.FUNC  I2p(Uds,Ugs)  {if(Uds>0,(Uep(Uds,Ugs)-cp*enp(Uds,Ugs))*enp(Uds,Ugs),0)}
.FUNC  h3p(Uds,Ugs)  {(3-2*(Uep(Uds,Ugs)/psip-k1p))*((Uep(Uds,Ugs)/psip-k1p))**2}
.FUNC  blep(Uds,Ugs) {h3p(Uds,Ugs)*I2p(Uds,Ugs)+(1-h3p(Uds,Ugs))*I1p(Uds,Ugs)}
.FUNC  I3p(Uds,Ugs)  {if(Uep(Uds,Ugs)/psip<k2p,if(Uep(Uds,Ugs)/psip<k1p,I1p(Uds,Ugs),blep(Uds,Ugs)),I2p(Uds,Ugs))}
.FUNC  Igp(Uds,Ugs) {betap(Uds,Ugs)*I3p(Uds,Ugs)}
.FUNC  Irdp(Usd)  {-Isp+exp(min(log(Isp)+Usd/(Unp*(TEMP+Trefp)),23))}
.FUNC  Idbrp(Uds)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(TEMP+Trefp-Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-1)/2/alp,Ugs)+Idbrp(Uds)-Irdp(-Uds),-Igp(-Uds,Ugs)-Irdp(-Uds))}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x)  {if(x<0,Rdiodp(-x),g13p)/h4p}
.FUNC  Rdrp(x)  {RSip(x)+(Rdp+Rsp)*(1+0.0039*(TEMP+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x) {30n*Irdp(-x)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x) {Cdiffp(h6p(x))+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs)  {SL(Igesp(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 0.8
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u

G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp))-if(Time>100p,SL(DDT(V(sp,dp))*Cds(V(sp,dp)),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 80.1
Cgsp gp sp 338p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
.ENDS


.SUBCKT BSO615C drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 

.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

.PARAM Lp=0.000001  g2p=0.0232  vmp=330000  thetap=0.07  kappap=1.4  cp=0.85  
.PARAM Vthp=1.92  Rsp=0.007  Rdp=0.00075  Tp=300  Trefp=273  authp=0.0025  aubrp=0.061  
.PARAM Ibrp=0.0000000001  Ubrp=69.4  k1p=0.5  k2p=1.5  Acfgs2p=1.25  Acfdgp=0.7  
.PARAM coxip=6.27545454545454E-04  Epp=14224137.9310345  psip=0.2199375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.451108  Coxp=8.08840826181818E-10  
.PARAM h2p=3.23578125E-14  Fnp=9.95625E-14  Vnp=0.273446327683616  g10p=591209.256  
.PARAM g13p=85459.4252233038  g14p=11160.7142857143  g15p=-0.739521909998096  
.PARAM g16p=-27.7057446621245  g17p=2.9588579141072E-10  alp=0.6    
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.FUNC  Uep(Uds,Ugs,Tj)  {Ugs-Vthp+authp*(Tj+Trefp-Tp)}
.FUNC  h1p(Tj) {Lp*vmp/(g2p*(Trefp/(Trefp+Tj))**1.5)}
.FUNC  Udssatp(Uds,Ugs,Tj)  {-h1p(Tj)+SQRT(max(h1p(Tj)**2+MAX(psip,Uep(Uds,Ugs,Tj))*h1p(Tj)/cp,0))}
.FUNC  Lsp(Uds,Ugs,Tj))  {if(Uds>Udssatp(Uds,Ugs,Tj),Lp-((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs,Tj)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs,Tj)  {Wp/(Lsp(Uds,Ugs,Tj)*((1+thetap*Uep(Uds,Ugs,Tj))*(1/(g2p*(Trefp/(Trefp+Tj))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs,Tj)  {min(Udssatp(Uds,Ugs,Tj),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs,Tj)  {(psip*enp(Uds,Ugs,Tj)-cp*enp(Uds,Ugs,Tj)**2)*exp(min(h7p(Uep(Uds,Ugs,Tj))/psip-1,23))}
.FUNC  I2p(Uds,Ugs,Tj)  {if(Uds>0,(Uep(Uds,Ugs,Tj)-cp*enp(Uds,Ugs,Tj))*enp(Uds,Ugs,Tj),0)}
.FUNC  h3p(Uds,Ugs,Tj)  {(3-2*(Uep(Uds,Ugs,Tj)/psip-k1p))*((Uep(Uds,Ugs,Tj)/psip-k1p))**2}
.FUNC  bp(Uds,Ugs,Tj) {h3p(Uds,Ugs,Tj)*I2p(Uds,Ugs,Tj)+(1-h3p(Uds,Ugs,Tj))*I1p(Uds,Ugs,Tj)}
.FUNC  I3p(Uds,Ugs,Tj)  {if(Uep(Uds,Ugs,Tj)/psip<k2p,if(Uep(Uds,Ugs,Tj)/psip<k1p,I1p(Uds,Ugs,Tj),bp(Uds,Ugs,Tj)),I2p(Uds,Ugs,Tj))}
.FUNC  Igp(Uds,Ugs,Tj) {betap(Uds,Ugs,Tj)*I3p(Uds,Ugs,Tj)}
.FUNC  Isp(Tj) {exp(min(g16p+((Tj+Trefp)/Tp-1)*(1.12/(Unp*(Tj+Trefp))),23))*((Tj+Trefp)/Tp)**3}
.FUNC  Irdp(Usd,Tj)  {-Isp(Tj)+exp(min(log(Isp(Tj))+Usd/(Unp*(Tj+Trefp)),23))}
.FUNC  Idbp(Uds,Tj)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(Tj+Trefp-Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs,Tj) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-1)/2/alp,Ugs,Tj)+Idbp(Uds,Tj),-Igp(-Uds,Ugs,Tj))-Irdp(-Uds,Tj)}
.FUNC  h4p(Tj)  {g10p*(Trefp/(Trefp+Tj))**1.5}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x,Tj)  {if(x<0,Rdiodp(-x),g13p)/h4p(Tj)}
.FUNC  Rdrp(x,Tj)  {RSip(x,Tj)+(Rdp+Rsp)*(1+0.0039*(Tj+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x,Tj) {30n*Irdp(-x,Tj)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x,Tj) {Cdiffp(h6p(x),Tj)+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs,Tj)  {SL(Igesp(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 0.8
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u


G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp),lm(V(Tj2)))-if(Time>100p,SL(DDT(V(sp,dp))*Cds(V(sp,dp),lm(V(Tj2))),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp),lm(V(Tj2)))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 80.1
Cgsp gp sp 338p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u

G_TH1 0 Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
G_TH2 0 Tj2 VALUE = {LIMIT(V(dr1p,so1p)*V(sp,so1p)/Rsp,0,100k)}
C11 Tj1 0 16.1u
C12 T12 0 15.2u
C13 T13 0 524u
C14 T14 0 3.95m
C15 T15 0 39.5m
C21 Tj2 0 23.9u
C22 T22 0 25.5u
C23 T23 0 683u
C24 T24 0 5.81m
C25 T25 0 39.5m
Ck T3 0 3m
R11 Tj1 T12 18.6m
R12 T12 T13 280m
R13 T13 T14 3.22
R14 T14 T15 21.45
R15 T15 Tsolder_joint1 22
R21 Tj2 T22 13.8m
R22 T22 T23 164m
R23 T23 T24 3.83
R24 T24 T25 20
R25 T25 Tsolder_joint2 22
Rk1 T14 T3 115
Rk2 T24 T3 115
.ENDS

$

.SUBCKT BSO612CV_L1 drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a

.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  {if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}


.PARAM Lp=0.000001  g2p=0.0232  vmp=330000  thetap=0.09  kappap=1.2  cp=0.85  
.PARAM Vthp=3.55  Rsp=0.007  Rdp=0.001  Tp=300  Trefp=273  authp=0.0048  aubrp=0.061  
.PARAM Ibrp=0.0000000001  Ubrp=69.4  k1p=0.5  k2p=1.5  Acfgs2p=0.9  Acfdgp=0.7  
.PARAM coxip=4.26111111111111E-04  Epp=14224137.9310345  psip=0.2199375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.451108  Coxp=5.49212906666667E-10  
.PARAM h2p=3.23578125E-14  Fnp=9.95625E-14  Vnp=0.593084745762712  g10p=627040.12  
.PARAM g13p=85459.4252233038  g14p=11160.7142857143  g15p=-1.08911408563356  
.PARAM g16p=-27.7057446621245  g17p=2.9588579141072E-10  alp=0.6 
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.PARAM h1p={Lp*vmp/(g2p*(Trefp/(Trefp+TEMP))**1.5)}
.PARAM h4p={g10p*(Trefp/(Trefp+TEMP))**1.5}
.PARAM Isp={exp(min(g16p+((TEMP+Trefp)/Tp-1)*(1.12/(Unp*(TEMP+Trefp))),23))*((TEMP+Trefp)/Tp)**3}
.FUNC  Uep(Uds,Ugs)  {Ugs-Vthp+authp*(TEMP+Trefp-Tp)}
.FUNC  Udssatp(Uds,Ugs)  {-h1p+SQRT(max(h1p**2+MAX(psip,Uep(Uds,Ugs))*h1p/cp,0))}
.FUNC  Lshortp(Uds,Ugs))  {if(Uds>Udssatp(Uds,Ugs),Lp-((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs)  {Wp/(Lshortp(Uds,Ugs)*((1+thetap*Uep(Uds,Ugs))*(1/(g2p*(Trefp/(Trefp+TEMP))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs)  {min(Udssatp(Uds,Ugs),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs)  {(psip*enp(Uds,Ugs)-cp*enp(Uds,Ugs)**2)*exp(min(h7p(Uep(Uds,Ugs))/psip-1,23))}
.FUNC  I2p(Uds,Ugs)  {if(Uds>0,(Uep(Uds,Ugs)-cp*enp(Uds,Ugs))*enp(Uds,Ugs),0)}
.FUNC  h3p(Uds,Ugs)  {(3-2*(Uep(Uds,Ugs)/psip-k1p))*((Uep(Uds,Ugs)/psip-k1p))**2}
.FUNC  blep(Uds,Ugs) {h3p(Uds,Ugs)*I2p(Uds,Ugs)+(1-h3p(Uds,Ugs))*I1p(Uds,Ugs)}
.FUNC  I3p(Uds,Ugs)  {if(Uep(Uds,Ugs)/psip<k2p,if(Uep(Uds,Ugs)/psip<k1p,I1p(Uds,Ugs),blep(Uds,Ugs)),I2p(Uds,Ugs))}
.FUNC  Igp(Uds,Ugs) {betap(Uds,Ugs)*I3p(Uds,Ugs)}
.FUNC  Irdp(Usd)  {-Isp+exp(min(log(Isp)+Usd/(Unp*(TEMP+Trefp)),23))}
.FUNC  Idbrp(Uds)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(TEMP+Trefp-Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-1)/2/alp,Ugs)+Idbrp(Uds)-Irdp(-Uds),-Igp(-Uds,Ugs)-Irdp(-Uds))}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x)  {if(x<0,Rdiodp(-x),g13p)/h4p}
.FUNC  Rdrp(x)  {RSip(x)+(Rdp+Rsp)*(1+0.0039*(TEMP+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x) {30n*Irdp(-x)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x) {Cdiffp(h6p(x))+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs)  {SL(Igesp(Uds,Ugs),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 0.8
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u

G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp))-if(Time>100p,SL(DDT(V(sp,dp))*Cds(V(sp,dp)),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 75.3
Cgsp gp sp 272p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
.ENDS

.SUBCKT BSO612CV drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 

.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  {W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  {if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}

.PARAM Lp=0.000001  g2p=0.0232  vmp=330000  thetap=0.09  kappap=1.2  cp=0.85  
.PARAM Vthp=3.55  Rsp=0.007  Rdp=0.001  Tp=300  Trefp=273  authp=0.0048  aubrp=0.061  
.PARAM Ibrp=0.0000000001  Ubrp=69.4  k1p=0.5  k2p=1.5  Acfgs2p=0.9  Acfdgp=0.7  
.PARAM coxip=4.26111111111111E-04  Epp=14224137.9310345  psip=0.2199375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.451108  Coxp=5.49212906666667E-10  
.PARAM h2p=3.23578125E-14  Fnp=9.95625E-14  Vnp=0.593084745762712  g10p=627040.12  
.PARAM g13p=85459.4252233038  g14p=11160.7142857143  g15p=-1.08911408563356  
.PARAM g16p=-27.7057446621245  g17p=2.9588579141072E-10  alp=0.6    
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.FUNC  Uep(Uds,Ugs,Tj)  {Ugs-Vthp+authp*(Tj+Trefp-Tp)}
.FUNC  h1p(Tj) {Lp*vmp/(g2p*(Trefp/(Trefp+Tj))**1.5)}
.FUNC  Udssatp(Uds,Ugs,Tj)  {-h1p(Tj)+SQRT(max(h1p(Tj)**2+MAX(psip,Uep(Uds,Ugs,Tj))*h1p(Tj)/cp,0))}
.FUNC  Lsp(Uds,Ugs,Tj))  {if(Uds>Udssatp(Uds,Ugs,Tj),Lp-((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs,Tj)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs,Tj)  {Wp/(Lsp(Uds,Ugs,Tj)*((1+thetap*Uep(Uds,Ugs,Tj))*(1/(g2p*(Trefp/(Trefp+Tj))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs,Tj)  {min(Udssatp(Uds,Ugs,Tj),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs,Tj)  {(psip*enp(Uds,Ugs,Tj)-cp*enp(Uds,Ugs,Tj)**2)*exp(min(h7p(Uep(Uds,Ugs,Tj))/psip-1,23))}
.FUNC  I2p(Uds,Ugs,Tj)  {if(Uds>0,(Uep(Uds,Ugs,Tj)-cp*enp(Uds,Ugs,Tj))*enp(Uds,Ugs,Tj),0)}
.FUNC  h3p(Uds,Ugs,Tj)  {(3-2*(Uep(Uds,Ugs,Tj)/psip-k1p))*((Uep(Uds,Ugs,Tj)/psip-k1p))**2}
.FUNC  bp(Uds,Ugs,Tj) {h3p(Uds,Ugs,Tj)*I2p(Uds,Ugs,Tj)+(1-h3p(Uds,Ugs,Tj))*I1p(Uds,Ugs,Tj)}
.FUNC  I3p(Uds,Ugs,Tj)  {if(Uep(Uds,Ugs,Tj)/psip<k2p,if(Uep(Uds,Ugs,Tj)/psip<k1p,I1p(Uds,Ugs,Tj),bp(Uds,Ugs,Tj)),I2p(Uds,Ugs,Tj))}
.FUNC  Igp(Uds,Ugs,Tj) {betap(Uds,Ugs,Tj)*I3p(Uds,Ugs,Tj)}
.FUNC  Isp(Tj) {exp(min(g16p+((Tj+Trefp)/Tp-1)*(1.12/(Unp*(Tj+Trefp))),23))*((Tj+Trefp)/Tp)**3}
.FUNC  Irdp(Usd,Tj)  {-Isp(Tj)+exp(min(log(Isp(Tj))+Usd/(Unp*(Tj+Trefp)),23))}
.FUNC  Idbp(Uds,Tj)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(Tj+Trefp-Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs,Tj) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-1)/2/alp,Ugs,Tj)+Idbp(Uds,Tj),-Igp(-Uds,Ugs,Tj))-Irdp(-Uds,Tj)}
.FUNC  h4p(Tj)  {g10p*(Trefp/(Trefp+Tj))**1.5}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x,Tj)  {if(x<0,Rdiodp(-x),g13p)/h4p(Tj)}
.FUNC  Rdrp(x,Tj)  {RSip(x,Tj)+(Rdp+Rsp)*(1+0.0039*(Tj+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x,Tj) {30n*Irdp(-x,Tj)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x,Tj) {Cdiffp(h6p(x),Tj)+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs,Tj)  {SL(Igesp(Uds,Ugs,Tj),-1000,1000)}

G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 0.8
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u


G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp),lm(V(Tj2)))-if(Time>100p,SL(DDT(V(sp,dp))*Cds(V(sp,dp),lm(V(Tj2))),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp),lm(V(Tj2)))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 75.3
Cgsp gp sp 272p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u

G_TH1 0 Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
G_TH2 0 Tj2 VALUE = {LIMIT(V(dr1p,so1p)*V(sp,so1p)/Rsp,0,100k)}
C11 Tj1 0 16.1u
C12 T12 0 15.2u
C13 T13 0 524u
C14 T14 0 3.95m
C15 T15 0 39.5m
C21 Tj2 0 23.9u
C22 T22 0 25.5u
C23 T23 0 683u
C24 T24 0 5.81m
C25 T25 0 39.5m
Ck T3 0 3m
R11 Tj1 T12 18.6m
R12 T12 T13 280m
R13 T13 T14 3.22
R14 T14 T15 21.45
R15 T15 Tsolder_joint1 22
R21 Tj2 T22 13.8m
R22 T22 T23 164m
R23 T23 T24 3.83
R24 T24 T25 20
R25 T25 Tsolder_joint2 22
Rk1 T14 T3 115
Rk2 T24 T3 115
.ENDS

